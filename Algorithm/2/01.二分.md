---
title: 01.äºŒåˆ†
outline: deep
---
ä¸“é¢˜ç¯‡ä¸€å…±å…«ä¸ªå°èŠ‚ï¼Œæˆ‘æŒ‰ç…§é‡è¦ç¨‹åº¦å°†å…¶åˆ’åˆ†ä¸ºå››ä¸ªç­‰çº§ï¼š

- T1ï¼šäºŒåˆ†ï¼Œæœç´¢
- T2ï¼šè´ªå¿ƒï¼ŒåŠ¨æ€è§„åˆ’ï¼ŒèƒŒåŒ…
- T3ï¼šæ»‘åŠ¨çª—å£
- T4ï¼šåˆ†æ²»ï¼Œä½è¿ç®—

äºŒåˆ†å’Œæœç´¢å¾ˆåƒï¼Œ äºŒåˆ†å¯ä»¥çœ‹æˆæ˜¯ä¸€ç§æŠ˜åŠæœç´¢ã€‚å¾ˆå¤šé—®é¢˜éƒ½å¯ä»¥çœ‹æˆæ˜¯æœç´¢é—®é¢˜ã€‚

è´ªå¿ƒå’ŒåŠ¨æ€è§„åˆ’å¾ˆåƒï¼Œè´ªå¿ƒå¯ä»¥çœ‹æˆæ˜¯ä¸è€ƒè™‘æ— åå‘æ€§çš„åŠ¨æ€è§„åˆ’ï¼Œå› æ­¤å…¶æ•ˆç‡ä¹Ÿå¾€å¾€æ¯”ä½¿ç”¨åŠ¨æ€è§„åˆ’å¿«ï¼Œä½†æ˜¯å¾€å¾€æ€ç»´éš¾åº¦å’Œè¯æ˜æ¯”åŠ¨æ€è§„åˆ’è¦å›°éš¾ã€‚

æ»‘åŠ¨çª—å£åœ¨è§£å†³åŒºé—´è®¡ç®—é—®é¢˜ä¸Šå¾€å¾€æœ‰å¥‡æ•ˆã€‚

åˆ†æ²»å’Œä½è¿ç®—ä½¿ç”¨çš„ç›¸å¯¹è¾ƒå°‘ï¼Œä½†ä¸æ„å‘³ç€å…¶éš¾åº¦è¾ƒä½ã€‚

å¤§å®¶ä¹Ÿå¯ä»¥é’ˆå¯¹è‡ªå·±é¢è¯•çš„å…¬å¸é…Œæƒ…ä¿®æ”¹ä¼˜å…ˆçº§ã€‚ æ¯”å¦‚ä½ æƒ³é¢è¯•å­—èŠ‚ï¼Œå­—èŠ‚å–œæ¬¢è€ƒåŠ¨æ€è§„åˆ’ï¼Œä½ å°±ä¼˜å…ˆçœ‹åŠ¨æ€è§„åˆ’ã€‚

# äºŒåˆ†æŸ¥æ‰¾

äºŒåˆ†æŸ¥æ‰¾åˆç§°`æŠ˜åŠæœç´¢ç®—æ³•`ã€‚ ç‹­ä¹‰åœ°æ¥è®²ï¼ŒäºŒåˆ†æŸ¥æ‰¾æ˜¯ä¸€ç§åœ¨æœ‰åºæ•°ç»„æŸ¥æ‰¾æŸä¸€ç‰¹å®šå…ƒç´ çš„æœç´¢ç®—æ³•ã€‚è¿™åŒæ—¶ä¹Ÿæ˜¯å¤§å¤šæ•°äººæ‰€çŸ¥é“çš„ä¸€ç§è¯´æ³•ã€‚å®é™…ä¸Šï¼Œ å¹¿ä¹‰çš„äºŒåˆ†æŸ¥æ‰¾æ˜¯å°†é—®é¢˜çš„è§„æ¨¡ç¼©å°åˆ°åŸæœ‰çš„ä¸€åŠã€‚ç±»ä¼¼çš„ï¼Œä¸‰åˆ†æ³•å°±æ˜¯å°†é—®é¢˜è§„æ¨¡ç¼©å°ä¸ºåŸæ¥çš„ 1/3ã€‚

æœ¬æ–‡ç»™å¤§å®¶å¸¦æ¥çš„å†…å®¹åˆ™æ˜¯`ç‹­ä¹‰åœ°äºŒåˆ†æŸ¥æ‰¾`ï¼Œå¦‚æœæƒ³äº†è§£å…¶ä»–å¹¿ä¹‰ä¸Šçš„äºŒåˆ†æŸ¥æ‰¾å¯ä»¥æŸ¥çœ‹æˆ‘ä¹‹å‰å†™çš„ä¸€ç¯‡åšæ–‡ [ä»è€é¼ è¯•æ¯’é—®é¢˜æ¥çœ‹äºŒåˆ†æ³•](https://lucifer.ren/blog/2019/12/11/laoshushidu/)

> å°½ç®¡äºŒåˆ†æŸ¥æ‰¾çš„åŸºæœ¬æ€æƒ³ç›¸å¯¹ç®€å•ï¼Œä½†ç»†èŠ‚å¯ä»¥ä»¤äººéš¾ä»¥æ‹›æ¶ ... â€” é«˜å¾·çº³

å½“ä¹”æ©Â·æœ¬ç‰¹åˆ©å°†äºŒåˆ†æœç´¢é—®é¢˜å¸ƒç½®ç»™ä¸“ä¸šç¼–ç¨‹è¯¾çš„å­¦ç”Ÿæ—¶ï¼Œç™¾åˆ†ä¹‹ 90 çš„å­¦ç”Ÿåœ¨èŠ±è´¹æ•°å°æ—¶åè¿˜æ˜¯æ— æ³•ç»™å‡ºæ­£ç¡®çš„è§£ç­”ï¼Œä¸»è¦å› ä¸ºè¿™äº›é”™è¯¯ç¨‹åºåœ¨é¢å¯¹è¾¹ç•Œå€¼çš„æ—¶å€™æ— æ³•è¿è¡Œï¼Œæˆ–è¿”å›é”™è¯¯ç»“æœã€‚1988 å¹´å¼€å±•çš„ä¸€é¡¹ç ”ç©¶æ˜¾ç¤ºï¼Œ20 æœ¬æ•™ç§‘ä¹¦é‡Œåªæœ‰ 5 æœ¬æ­£ç¡®å®ç°äº†äºŒåˆ†æœç´¢ã€‚ä¸ä»…å¦‚æ­¤ï¼Œæœ¬ç‰¹åˆ©è‡ªå·± 1986 å¹´å‡ºç‰ˆçš„ã€Šç¼–ç¨‹ç ç‘ã€‹ä¸€ä¹¦ä¸­çš„äºŒåˆ†æœç´¢ç®—æ³•å­˜åœ¨æ•´æ•°æº¢å‡ºçš„é—®é¢˜ï¼ŒäºŒåå¤šå¹´æ¥æ— äººå‘ç°ã€‚Java è¯­è¨€çš„åº“æ‰€å®ç°çš„äºŒåˆ†æœç´¢ç®—æ³•ä¸­åŒæ ·çš„æº¢å‡ºé—®é¢˜å­˜åœ¨äº†ä¹å¹´å¤šæ‰è¢«ä¿®å¤ã€‚

å¯è§äºŒåˆ†æŸ¥æ‰¾å¹¶ä¸ç®€å•ï¼Œ æœ¬æ–‡å°±è¯•å›¾å¸¦ä½ èµ°è¿‘ taï¼Œæ˜ç™½ ta çš„åº•å±‚é€»è¾‘ï¼Œå¹¶æä¾›æ¨¡æ¿å¸®åŠ©å¤§å®¶å†™ä¹¦ bug free çš„äºŒåˆ†æŸ¥æ‰¾ä»£ç ã€‚

å¤§å®¶å¯ä»¥çœ‹å®Œè®²ä¹‰ç»“åˆ [LeetCode Book äºŒåˆ†æŸ¥æ‰¾ç»ƒä¹ ä¸€ä¸‹](https://leetcode-cn.com/leetbook/read/binary-search)

## é—®é¢˜å®šä¹‰

ç»™å®šä¸€ä¸ªç”±æ•°å­—ç»„æˆçš„æœ‰åºæ•°ç»„ numsï¼Œå¹¶ç»™ä½ ä¸€ä¸ªæ•°å­— targetã€‚é—® nums ä¸­æ˜¯å¦å­˜åœ¨ targetã€‚å¦‚æœå­˜åœ¨ï¼Œ åˆ™è¿”å›å…¶åœ¨ nums ä¸­çš„ç´¢å¼•ã€‚å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™è¿”å› - 1ã€‚

è¿™æ˜¯äºŒåˆ†æŸ¥æ‰¾ä¸­æœ€ç®€å•çš„ä¸€ç§å½¢å¼ã€‚å½“ç„¶äºŒåˆ†æŸ¥æ‰¾ä¹Ÿæœ‰å¾ˆå¤šçš„å˜å½¢ï¼Œè¿™ä¹Ÿæ˜¯äºŒåˆ†æŸ¥æ‰¾å®¹æ˜“å‡ºé”™ï¼Œéš¾ä»¥æŒæ¡çš„åŸå› ã€‚

å¸¸è§å˜ä½“æœ‰ï¼š

- å¦‚æœå­˜åœ¨å¤šä¸ªæ»¡è¶³æ¡ä»¶çš„å…ƒç´ ï¼Œè¿”å›æœ€å·¦è¾¹æ»¡è¶³æ¡ä»¶çš„ç´¢å¼•ã€‚
- å¦‚æœå­˜åœ¨å¤šä¸ªæ»¡è¶³æ¡ä»¶çš„å…ƒç´ ï¼Œè¿”å›æœ€å³è¾¹æ»¡è¶³æ¡ä»¶çš„ç´¢å¼•ã€‚
- æ•°ç»„ä¸æ˜¯æ•´ä½“æœ‰åºçš„ã€‚ æ¯”å¦‚å…ˆå‡åºå†é™åºï¼Œæˆ–è€…å…ˆé™åºå†å‡åºã€‚
- å°†ä¸€ç»´æ•°ç»„å˜æˆäºŒç»´æ•°ç»„ã€‚
- ã€‚ã€‚ã€‚

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬é€ä¸ªè¿›è¡ŒæŸ¥çœ‹ã€‚

## æœ¯è¯­

äºŒåˆ†æŸ¥æ‰¾ä¸­ä½¿ç”¨çš„æœ¯è¯­ï¼š

- target â€”â€” è¦æŸ¥æ‰¾çš„å€¼
- index â€”â€” å½“å‰ä½ç½®
- l å’Œ r â€”â€” å·¦å³æŒ‡é’ˆ
- mid â€”â€” å·¦å³æŒ‡é’ˆçš„ä¸­ç‚¹ï¼Œç”¨æ¥ç¡®å®šæˆ‘ä»¬åº”è¯¥å‘å·¦æŸ¥æ‰¾è¿˜æ˜¯å‘å³æŸ¥æ‰¾çš„ç´¢å¼•

## åŸºæœ¬æ¦‚å¿µ

é¦–å…ˆæˆ‘ä»¬è¦çŸ¥é“å‡ ä¸ªåŸºæœ¬æ¦‚å¿µã€‚è¿™äº›æ¦‚å¿µå¯¹å­¦ä¹ äºŒåˆ†æœ‰ç€å¾ˆé‡è¦çš„ä½œç”¨ï¼Œä¹‹åé‡åˆ°è¿™äº›æ¦‚å¿µå°±ä¸å†è®²è¿°äº†ï¼Œé»˜è®¤å¤§å®¶å·²ç»æŒæ¡ã€‚

### è§£ç©ºé—´

è§£ç©ºé—´æŒ‡çš„æ˜¯**é¢˜ç›®æ‰€æœ‰å¯èƒ½çš„è§£æ„æˆçš„é›†åˆ**ã€‚æ¯”å¦‚ä¸€ä¸ªé¢˜ç›®æ‰€æœ‰è§£çš„å¯èƒ½æ˜¯ 1,2,3,4,5ï¼Œä½†å…·ä½“åœ¨æŸä¸€ç§æƒ…å†µåªèƒ½æ˜¯å…¶ä¸­æŸä¸€ä¸ªæ•°ï¼ˆå³å¯èƒ½æ˜¯ 1ï¼Œ2ï¼Œ3ï¼Œ4ï¼Œ5 ä¸­çš„**ä¸€ä¸ªæ•°**ï¼‰ã€‚é‚£ä¹ˆè¿™é‡Œçš„è§£ç©ºé—´å°±æ˜¯ 1,2,3,4,5 æ„æˆçš„é›†åˆï¼Œåœ¨æŸä¸€ä¸ªå…·ä½“çš„æƒ…å†µä¸‹å¯èƒ½æ˜¯å…¶ä¸­ä»»æ„ä¸€ä¸ªå€¼ï¼Œ**æˆ‘ä»¬çš„ç›®æ ‡å°±æ˜¯åœ¨æŸä¸ªå…·ä½“çš„æƒ…å†µåˆ¤æ–­å…¶å…·ä½“æ˜¯å“ªä¸ª**ã€‚å¦‚æœçº¿æ€§æšä¸¾æ‰€æœ‰çš„å¯èƒ½ï¼Œå°±æšä¸¾è¿™éƒ¨åˆ†æ¥è¯´æ—¶é—´å¤æ‚åº¦å°±æ˜¯ $O(n)$ã€‚

ä¸¾äº†ä¾‹å­ï¼š

å¦‚æœè®©ä½ åœ¨ä¸€ä¸ªæ•°ç»„ nums ä¸­æŸ¥æ‰¾ targetï¼Œå¦‚æœå­˜åœ¨åˆ™è¿”å›å¯¹åº”ç´¢å¼•ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™è¿”å› -1ã€‚é‚£ä¹ˆå¯¹äºè¿™é“é¢˜æ¥è¯´å…¶è§£ç©ºé—´æ˜¯ä»€ä¹ˆï¼Ÿ

å¾ˆæ˜æ˜¾è§£ç©ºé—´æ˜¯åŒºé—´ [-1, n-1]ï¼Œå…¶ä¸­ n ä¸º nums çš„é•¿åº¦ã€‚

éœ€è¦æ³¨æ„çš„æ˜¯ä¸Šé¢é¢˜ç›®çš„è§£ç©ºé—´åªå¯èƒ½æ˜¯åŒºé—´ [-1,n-1] ä¹‹é—´çš„æ•´æ•°ã€‚è€Œè¯¸å¦‚ 1.2 è¿™æ ·çš„å°æ•°æ˜¯ä¸å¯èƒ½å­˜åœ¨çš„ã€‚è¿™å…¶å®ä¹Ÿæ˜¯å¤§å¤šæ•°äºŒåˆ†çš„æƒ…å†µã€‚ ä½†ä¹Ÿæœ‰å°‘éƒ¨åˆ†é¢˜ç›®è§£ç©ºé—´åŒ…æ‹¬å°æ•°çš„ã€‚å¦‚æœè§£ç©ºé—´åŒ…æ‹¬å°æ•°ï¼Œå°±å¯èƒ½ä¼šæ¶‰åŠåˆ°ç²¾åº¦é—®é¢˜ï¼Œè¿™ä¸€ç‚¹å¤§å®¶éœ€è¦æ³¨æ„ã€‚

æ¯”å¦‚è®©ä½ æ±‚ä¸€ä¸ªæ•° x çš„å¹³æ–¹æ ¹ï¼Œç­”æ¡ˆè¯¯å·®åœ¨ $10^-6$ æ¬¡æ–¹éƒ½è®¤ä¸ºæ­£ç¡®ã€‚è¿™é‡Œå®¹æ˜“çŸ¥é“å…¶è§£ç©ºé—´å¤§å°å¯å®šä¹‰ä¸º [1,x]ï¼ˆå½“ç„¶å¯ä»¥å®šä¹‰åœ°æ›´ç²¾ç¡®ï¼Œä¹‹åæˆ‘ä»¬å†è®¨è®ºè¿™ä¸ªé—®é¢˜ï¼‰ï¼Œå…¶ä¸­è§£ç©ºé—´åº”è¯¥åŒ…æ‹¬æ‰€æœ‰åŒºé—´çš„å®æ•°ï¼Œä¸ä»…ä»…æ˜¯æ•´æ•°è€Œå·²ã€‚è¿™ä¸ªæ—¶å€™è§£é¢˜æ€è·¯å’Œä»£ç éƒ½æ²¡æœ‰å¤ªå¤§å˜åŒ–ï¼Œå”¯äºŒéœ€è¦å˜åŒ–çš„æ˜¯ï¼š

1. æ›´æ–°ç­”æ¡ˆçš„æ­¥é•¿ã€‚ æ¯”å¦‚ä¹‹å‰çš„æ›´æ–°æ˜¯ `l = mid + 1`ï¼Œç°åœ¨**å¯èƒ½**å°±ä¸è¡Œäº†ï¼Œå› æ­¤è¿™æ ·**å¯èƒ½**ä¼šé”™è¿‡æ­£ç¡®è§£ï¼Œæ¯”å¦‚æ­£ç¡®è§£æ°å¥½å°±åœ¨åŒºé—´ [mid,mid+1] å†…çš„æŸä¸€ä¸ªå°æ•°ã€‚
2. åˆ¤æ–­æ¡ä»¶æ—¶å€™éœ€è¦è€ƒè™‘è¯¯å·®ã€‚ç”±äºç²¾åº¦çš„é—®é¢˜ï¼Œåˆ¤æ–­çš„ç»“æŸæ¡ä»¶å¯èƒ½å°±è¦å˜æˆ **ä¸ç­”æ¡ˆçš„è¯¯å·®åœ¨æŸä¸€ä¸ªèŒƒå›´å†…**ã€‚

> è¿™åœ¨ä¸šç•Œç§°ä¸º**å®æ•°äºŒåˆ†**

å¯¹äº**æœç´¢ç±»é¢˜ç›®**ï¼Œè§£ç©ºé—´ä¸€å®šæ˜¯æœ‰é™çš„ï¼Œä¸ç„¶é—®é¢˜ä¸å¯è§£ã€‚å¯¹äºæœç´¢ç±»é—®é¢˜ï¼Œç¬¬ä¸€æ­¥å°±æ˜¯éœ€è¦æ˜ç¡®è§£ç©ºé—´ï¼Œè¿™æ ·ä½ æ‰èƒ½å¤Ÿåœ¨è§£ç©ºé—´å†…è¿›è¡Œæœç´¢ã€‚è¿™ä¸ªæŠ€å·§ä¸ä»…é€‚ç”¨äºäºŒåˆ†æ³•ï¼Œåªè¦æ˜¯æœç´¢é—®é¢˜éƒ½å¯ä»¥ä½¿ç”¨ï¼Œæ¯”å¦‚ DFSï¼ŒBFS ä»¥åŠå›æº¯ç­‰ã€‚åªä¸è¿‡å¯¹äºäºŒåˆ†æ³•æ¥è¯´ï¼Œ**æ˜ç¡®è§£ç©ºé—´æ˜¾å¾—æ›´ä¸ºé‡è¦**ã€‚å¦‚æœç°åœ¨è¿˜ä¸ç†è§£è¿™å¥è¯ä¹Ÿæ²¡å…³ç³»ï¼Œçœ‹å®Œæœ¬æ–‡æˆ–è®¸ä½ å°±ç†è§£äº†ã€‚

å®šä¹‰è§£ç©ºé—´çš„æ—¶å€™çš„ä¸€ä¸ªåŸåˆ™æ˜¯ï¼š å¯ä»¥å¤§ä½†ä¸å¯ä»¥å°ã€‚å› ä¸ºå¦‚æœè§£ç©ºé—´åå¤§ï¼ˆåªè¦ä¸æ˜¯æ— é™å¤§ï¼‰æ— éå°±æ˜¯å¤šåšå‡ æ¬¡è¿ç®—ï¼Œè€Œå¦‚æœè§£ç©ºé—´è¿‡å°åˆ™å¯èƒ½**é”™å¤±æ­£ç¡®è§£**ï¼Œå¯¼è‡´ç»“æœé”™è¯¯ã€‚æ¯”å¦‚å‰é¢æˆ‘æåˆ°çš„æ±‚ x çš„å¹³æ–¹æ ¹ï¼Œæˆ‘ä»¬å½“ç„¶å¯ä»¥å°†è§£ç©ºé—´å®šä¹‰çš„æ›´å°ï¼Œæ¯”å¦‚å®šä¹‰ä¸º [1,x/2]ï¼Œè¿™æ ·å¯ä»¥å‡å°‘è¿ç®—çš„æ¬¡æ•°ã€‚ä½†å¦‚æœè®¾ç½®åœ°å¤ªå°ï¼Œåˆ™å¯èƒ½ä¼šé”™è¿‡æ­£ç¡®è§£ã€‚è¿™æ˜¯æ–°æ‰‹å®¹æ˜“çŠ¯é”™çš„ç‚¹ä¹‹ä¸€ã€‚

æœ‰çš„åŒå­¦å¯èƒ½ä¼šè¯´æˆ‘çœ‹ä¸å‡ºæ¥æ€ä¹ˆåŠå‘€ã€‚æˆ‘è§‰å¾—å¦‚æœä½ å®åœ¨æ‹¿ä¸å‡†ä¹Ÿå®Œå…¨æ²¡æœ‰å…³ç³»ï¼Œæ¯”å¦‚æ±‚ x çš„å¹³æ–¹æ ¹ï¼Œå°±å¯ä»¥ç”šè‡³ä¸º [1,x]ï¼Œå°±è®©å®ƒå¤šåšå‡ æ¬¡è¿ç®—å˜›ã€‚æˆ‘å»ºè®®ä½ **ç»™ä¸Šä¸‹ç•Œè®¾ç½®ä¸€ä¸ªå®½æ³›çš„èŒƒå›´**ã€‚ç­‰ä½ å¯¹äºŒåˆ†é€æ­¥äº†è§£ä¹‹åå¯ä»¥**å¡åœ°æ›´æ­»ä¸€ç‚¹**ã€‚

### åºåˆ—æœ‰åº

æˆ‘è¿™é‡Œè¯´çš„æ˜¯åºåˆ—ï¼Œå¹¶ä¸æ˜¯æ•°ç»„ï¼Œé“¾è¡¨ç­‰ã€‚ä¹Ÿå°±æ˜¯è¯´äºŒåˆ†æ³•é€šå¸¸è¦æ±‚çš„åºåˆ—æœ‰åºï¼Œä¸ä¸€å®šæ˜¯æ•°ç»„ï¼Œé“¾è¡¨ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯å…¶ä»–æ•°æ®ç»“æ„ã€‚å¦å¤–æœ‰çš„**åºåˆ—æœ‰åº**é¢˜ç›®ç›´æ¥è®²å‡ºæ¥äº†ï¼Œä¼šæ¯”è¾ƒå®¹æ˜“ã€‚è€Œæœ‰äº›åˆ™éšè—åœ¨é¢˜ç›®ä¿¡æ¯ä¹‹ä¸­ã€‚ä¹ä¸€çœ‹ï¼Œé¢˜ç›®å¹¶æ²¡æœ‰**æœ‰åº**å…³é”®å­—ï¼Œè€Œæœ‰åºå…¶å®å°±éšè—åœ¨å­—é‡Œè¡Œé—´ã€‚æ¯”å¦‚é¢˜ç›®ç»™äº†æ•°ç»„ numsï¼Œå¹¶ä¸”æ²¡æœ‰é™å®š nums æœ‰åºï¼Œä½†é™å®šäº† nums ä¸ºéè´Ÿã€‚è¿™æ ·å¦‚æœç»™ nums åšå‰ç¼€å’Œæˆ–è€…å‰ç¼€æˆ–ï¼ˆä½è¿ç®—æˆ–ï¼‰ï¼Œå°±å¯ä»¥å¾—åˆ°ä¸€ä¸ªæœ‰åºçš„åºåˆ—å•¦ã€‚

> æ›´å¤šæŠ€å·§åœ¨å››ä¸ªåº”ç”¨éƒ¨åˆ†å±•å¼€å“¦ã€‚

è™½ç„¶äºŒåˆ†æ³•ä¸æ„å‘³ç€éœ€è¦åºåˆ—æœ‰åºï¼Œä½†å¤§å¤šæ•°äºŒåˆ†é¢˜ç›®éƒ½æœ‰**æœ‰åº**è¿™ä¸ªæ˜¾è‘—ç‰¹å¾ã€‚åªä¸è¿‡ï¼š

- æœ‰çš„æ˜¯é¢˜ç›®ç›´æ¥é™å®šäº†æœ‰åºã€‚è¿™ç§é¢˜ç›®é€šå¸¸éš¾åº¦ä¸é«˜ï¼Œä¹Ÿå®¹æ˜“è®©äººæƒ³åˆ°ç”¨äºŒåˆ†ã€‚
- æœ‰çš„æ˜¯éœ€è¦ä½ **è‡ªå·±æ„é€ æœ‰åºåºåˆ—**ã€‚è¿™ç§ç±»å‹çš„é¢˜ç›®é€šå¸¸éš¾åº¦ä¸ä½ï¼Œéœ€è¦å¤§å®¶æœ‰ä¸€å®šçš„è§‚å¯Ÿèƒ½åŠ›ã€‚

æ¯”å¦‚[Triple Inversion](https://binarysearch.com/problems/Triple-Inversion "Triple Inversion")ã€‚é¢˜ç›®æè¿°å¦‚ä¸‹ï¼š

```
Given a list of integers nums, return the number of pairs i < j such that nums[i] > nums[j] * 3.

Constraintsï¼š n â‰¤ 100,000 where n is the length of nums
Example 1
Inputï¼š
nums = [7, 1, 2]
Outputï¼š
2
Explanationï¼š
We have the pairs (7, 1) and (7, 2)

```

è¿™é“é¢˜å¹¶æ²¡æœ‰é™å®šæ•°ç»„ nums æ˜¯æœ‰åºçš„ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥æ„é€ ä¸€ä¸ªæœ‰åºåºåˆ— dï¼Œè¿›è€Œåœ¨ d ä¸ŠåšäºŒåˆ†ã€‚ä»£ç ï¼š

```py
class Solution:
    def solve(self, A):
        d = []
        ans = 0

        for a in A:
            i = bisect.bisect_right(d, a * 3)
            ans += len(d) - i
            bisect.insort(d, a)
        return ans
```

å¦‚æœæš‚æ—¶ä¸ç†è§£ä»£ç ä¹Ÿæ²¡å…³ç³»ï¼Œå¤§å®¶å…ˆç•™ä¸ªå°è±¡ï¼ŒçŸ¥é“æœ‰è¿™ä¹ˆä¸€ç§ç±»å‹é¢˜å³å¯ï¼Œå¤§å®¶å¯ä»¥çœ‹å®Œæœ¬ç« çš„æ‰€æœ‰å†…å®¹ï¼ˆä¸Šä¸‹ä¸¤ç¯‡ï¼‰ä¹‹åå†å›å¤´åšè¿™é“é¢˜ã€‚

æœ€åæ¨èä¸€ä¸ªæ„é€ æœ‰åºåºåˆ—çš„é¢˜ç›®ï¼š

- [2426. æ»¡è¶³ä¸ç­‰å¼çš„æ•°å¯¹æ•°ç›®](https://leetcode.cn/problems/number-of-pairs-satisfying-inequality/)

### æå€¼

ç±»ä¼¼æˆ‘åœ¨[å †ä¸“é¢˜](https://lucifer.ren/blog/2020/12/26/heap/ "å †ä¸“é¢˜") æåˆ°çš„æå€¼ã€‚åªä¸è¿‡è¿™é‡Œçš„æå€¼æ˜¯**é™æ€çš„**ï¼Œè€Œä¸æ˜¯åŠ¨æ€çš„ã€‚è¿™é‡Œçš„æå€¼é€šå¸¸æŒ‡çš„æ˜¯**æ±‚ç¬¬ k å¤§ï¼ˆæˆ–è€…ç¬¬ k å°ï¼‰çš„æ•°ã€‚**

å †çš„ä¸€ç§å¾ˆé‡è¦çš„ç”¨æ³•æ˜¯æ±‚ç¬¬ k å¤§çš„æ•°ï¼Œè€ŒäºŒåˆ†æ³•ä¹Ÿå¯ä»¥æ±‚ç¬¬ k å¤§çš„æ•°ï¼Œåªä¸è¿‡**äºŒè€…çš„æ€è·¯å®Œå…¨ä¸åŒ**ã€‚ä½¿ç”¨å †æ±‚ç¬¬ k å¤§çš„æ€è·¯æˆ‘å·²ç»åœ¨å‰é¢æåˆ°çš„å †ä¸“é¢˜é‡Œè¯¦ç»†è§£é‡Šäº†ã€‚é‚£ä¹ˆäºŒåˆ†å‘¢ï¼Ÿè¿™é‡Œæˆ‘ä»¬é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥æ„Ÿå—ä¸€ä¸‹ï¼šè¿™é“é¢˜æ˜¯ [Kth Pair Distance](https://binarysearch.com/problems/Kth-Pair-Distance "Kth Pair Distance")ï¼Œé¢˜ç›®æè¿°å¦‚ä¸‹ï¼š

```
Given a list of integers nums and an integer k, return the k-th (0-indexed) smallest abs(x - y) for every pair of elements (x, y) in nums. Note that (x, y) and (y, x) are considered the same pair.

Constraints:n â‰¤ 100,000 where n is the length of nums
Example 1
Input:
nums = [1, 5, 3, 2]
k = 3
Output:
2
Explanation:

Here are all the pair distances:

abs(1 - 5) = 4
abs(1 - 3) = 2
abs(1 - 2) = 1
abs(5 - 3) = 2
abs(5 - 2) = 3
abs(3 - 2) = 1

Sorted in ascending order we have [1, 1, 2, 2, 3, 4].
```

ç®€å•æ¥è¯´ï¼Œé¢˜ç›®å°±æ˜¯ç»™çš„ä¸€ä¸ªæ•°ç»„ numsï¼Œè®©ä½ æ±‚ nums ç¬¬ k å¤§çš„**ä»»æ„ä¸¤ä¸ªæ•°çš„å·®çš„ç»å¯¹å€¼**ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å †æ¥åšï¼Œåªä¸è¿‡ä½¿ç”¨å †çš„æ—¶é—´å¤æ‚åº¦ä¼šå¾ˆé«˜ï¼Œå¯¼è‡´æ— æ³•é€šè¿‡æ‰€æœ‰çš„æµ‹è¯•ç”¨ä¾‹ã€‚è¿™é“é¢˜æˆ‘ä»¬å¯ä»¥ä½¿ç”¨äºŒåˆ†æ³•æ¥é™ç»´æ‰“å‡»ã€‚

å¯¹äºè¿™é“é¢˜æ¥è¯´ï¼Œè§£ç©ºé—´å°±æ˜¯ä» 0 åˆ°æ•°ç»„ nums ä¸­æœ€å¤§æœ€å°å€¼çš„å·®ï¼Œç”¨åŒºé—´è¡¨ç¤ºå°±æ˜¯ [0, max(nums), min(nums)]ã€‚æ˜ç¡®äº†è§£ç©ºé—´ä¹‹åï¼Œæˆ‘ä»¬å°±éœ€è¦å¯¹è§£ç©ºé—´è¿›è¡ŒäºŒåˆ†ã€‚å¯¹äºè¿™é“é¢˜æ¥è¯´ï¼Œå¯ä»¥é€‰å½“å‰è§£ç©ºé—´çš„ä¸­é—´å€¼ mid ï¼Œç„¶åè®¡ç®—å°äºç­‰äºè¿™ä¸ªä¸­é—´å€¼çš„**ä»»æ„ä¸¤ä¸ªæ•°çš„å·®çš„ç»å¯¹å€¼**æœ‰å‡ ä¸ªï¼Œæˆ‘ä»¬ä¸å¦¨ä»¤è¿™ä¸ªæ•°å­—ä¸º xã€‚

- å¦‚æœ x å¤§äº kï¼Œé‚£ä¹ˆä»»ä½•è§£ç©ºé—´ä¸­å¤§äºç­‰äº mid çš„æ•°éƒ½ä¸å¯èƒ½æ˜¯ç­”æ¡ˆã€‚
- å¦‚æœ x å°äº kï¼Œé‚£ä¹ˆä»»ä½•è§£ç©ºé—´ä¸­å°äºç­‰äº mid çš„æ•°éƒ½ä¸å¯èƒ½æ˜¯ç­”æ¡ˆã€‚
- å¦‚æœ x ç­‰äº kï¼Œé‚£ä¹ˆ mid å°±æ˜¯ç­”æ¡ˆã€‚

åŸºäºæ­¤ï¼Œæˆ‘ä»¬å¯ä½¿ç”¨äºŒåˆ†æ¥è§£å†³ã€‚è¿™ç§é¢˜å‹ï¼Œæˆ‘æ€»ç»“ä¸º**è®¡æ•°äºŒåˆ†**ã€‚æˆ‘ä¼šåœ¨åé¢çš„å››å¤§åº”ç”¨éƒ¨åˆ†é‡ç‚¹è®²è§£ã€‚

ä»£ç ï¼š

```py

class Solution:
    def solve(self, A, k):
        A.sort()
        def count_not_greater(diff):
            i = ans = 0
            for j in range(1, len(A)):
                while A[j] - A[i] > diff:
                    i += 1
                ans += j - i
            return ans
        l, r = 0, A[-1] - A[0]

        while l <= r:
            mid = (l + r) // 2
            if count_not_greater(mid) > k:
                r = mid - 1
            else:
                l = mid + 1
        return l
```

å¦‚æœæš‚æ—¶ä¸ç†è§£ä»£ç ä¹Ÿæ²¡å…³ç³»ï¼Œå¤§å®¶å…ˆç•™ä¸ªå°è±¡ï¼ŒçŸ¥é“æœ‰è¿™ä¹ˆä¸€ç§ç±»å‹é¢˜å³å¯ï¼Œå¤§å®¶å¯ä»¥çœ‹å®Œæœ¬ç« çš„æ‰€æœ‰å†…å®¹ï¼ˆä¸Šä¸‹ä¸¤ç¯‡ï¼‰ä¹‹åå†å›å¤´åšè¿™é“é¢˜ã€‚

## ä¸€ä¸ªä¸­å¿ƒ

äºŒåˆ†æ³•çš„ä¸€ä¸ªä¸­å¿ƒå¤§å®¶ä¸€å®šç‰¢ç‰¢è®°ä½ã€‚å…¶ä»–ï¼ˆæ¯”å¦‚åºåˆ—æœ‰åºï¼Œå·¦å³åŒæŒ‡é’ˆï¼‰éƒ½æ˜¯äºŒåˆ†æ³•çš„æ‰‹å’Œè„šï¼Œéƒ½æ˜¯è¡¨è±¡ï¼Œå¹¶ä¸æ˜¯æœ¬è´¨ï¼Œè€Œ**æŠ˜åŠæ‰æ˜¯äºŒåˆ†æ³•çš„çµé­‚**ã€‚

å‰é¢å·²ç»ç»™å¤§å®¶æ˜ç¡®äº†è§£ç©ºé—´çš„æ¦‚å¿µã€‚è€Œè¿™é‡Œçš„æŠ˜åŠå…¶å®å°±æ˜¯è§£ç©ºé—´çš„æŠ˜åŠã€‚

æ¯”å¦‚åˆšå¼€å§‹è§£ç©ºé—´æ˜¯ [1, n]ï¼ˆn ä¸ºä¸€ä¸ªå¤§äº n çš„æ•´æ•°ï¼‰ã€‚é€šè¿‡**æŸç§æ–¹å¼**ï¼Œæˆ‘ä»¬ç¡®å®š [1, m] åŒºé—´éƒ½**ä¸å¯èƒ½æ˜¯ç­”æ¡ˆ**ã€‚é‚£ä¹ˆè§£ç©ºé—´å°±å˜æˆäº† (m,n]ï¼ŒæŒç»­æ­¤è¿‡ç¨‹çŸ¥é“è§£ç©ºé—´å˜æˆå¹³å‡¡ï¼ˆç›´æ¥å¯è§£ï¼‰ã€‚

> æ³¨æ„åŒºé—´ (m,n] å·¦ä¾§æ˜¯å¼€æ”¾çš„ï¼Œè¡¨ç¤º m ä¸å¯èƒ½å–åˆ°ã€‚

æ˜¾ç„¶æŠ˜åŠçš„éš¾ç‚¹æ˜¯**æ ¹æ®ä»€ä¹ˆæ¡ä»¶èˆå¼ƒå“ªä¸€æ­¥éƒ¨åˆ†**ã€‚è¿™é‡Œæœ‰ä¸¤ä¸ªå…³é”®å­—:

1. ä»€ä¹ˆæ¡ä»¶
2. èˆå¼ƒå“ªéƒ¨åˆ†

å‡ ä¹æ‰€æœ‰çš„äºŒåˆ†çš„éš¾ç‚¹éƒ½åœ¨è¿™ä¸¤ä¸ªç‚¹ä¸Šã€‚å¦‚æœæ˜ç¡®äº†è¿™ä¸¤ç‚¹ï¼Œå‡ ä¹æ‰€æœ‰çš„äºŒåˆ†é—®é¢˜éƒ½å¯ä»¥è¿åˆƒè€Œè§£ã€‚å¹¸è¿çš„æ˜¯ï¼Œå…³äºè¿™ä¸¤ä¸ªé—®é¢˜çš„ç­”æ¡ˆé€šå¸¸éƒ½æ˜¯æœ‰é™çš„ï¼Œé¢˜ç›®è€ƒå¯Ÿçš„å¾€å¾€å°±æ˜¯é‚£å‡ ç§ã€‚è¿™å…¶å®å°±æ˜¯æ‰€è°“çš„åšé¢˜å¥—è·¯ã€‚å…³äºè¿™äº›å¥—è·¯ï¼Œæˆ‘ä¼šåœ¨ä¹‹åçš„å››ä¸ªåº”ç”¨éƒ¨åˆ†ç»™å¤§å®¶åšè¯¦ç»†ä»‹ç»ã€‚

## å¸¸è§é¢˜å‹

### æŸ¥æ‰¾ä¸€ä¸ªæ•°

ç®—æ³•æè¿°ï¼š

- å…ˆä»æ•°ç»„çš„ä¸­é—´å…ƒç´ å¼€å§‹ï¼Œå¦‚æœä¸­é—´å…ƒç´ æ­£å¥½æ˜¯è¦æŸ¥æ‰¾çš„å…ƒç´ ï¼Œåˆ™æœç´¢è¿‡ç¨‹ç»“æŸï¼›
- å¦‚æœç›®æ ‡å…ƒç´ å¤§äºä¸­é—´å…ƒç´ ï¼Œåˆ™åœ¨æ•°ç»„å¤§äºä¸­é—´å…ƒç´ çš„é‚£ä¸€åŠä¸­æŸ¥æ‰¾ï¼Œè€Œä¸”è·Ÿå¼€å§‹ä¸€æ ·ä»ä¸­é—´å…ƒç´ å¼€å§‹æ¯”è¾ƒã€‚
- å¦‚æœç›®æ ‡å…ƒç´ å°äºä¸­é—´å…ƒç´ ï¼Œåˆ™åœ¨æ•°ç»„å°äºä¸­é—´å…ƒç´ çš„é‚£ä¸€åŠä¸­æŸ¥æ‰¾ï¼Œè€Œä¸”è·Ÿå¼€å§‹ä¸€æ ·ä»ä¸­é—´å…ƒç´ å¼€å§‹æ¯”è¾ƒã€‚
- å¦‚æœåœ¨æŸä¸€æ­¥éª¤æ•°ç»„ä¸ºç©ºï¼Œåˆ™ä»£è¡¨æ‰¾ä¸åˆ°ã€‚

**å¤æ‚åº¦åˆ†æ**

- å¹³å‡æ—¶é—´å¤æ‚åº¦ï¼š $O(logN)$
- æœ€åæ—¶é—´å¤æ‚åº¦ï¼š $O(logN)$
- æœ€ä¼˜æ—¶é—´å¤æ‚åº¦ï¼š $O(1)$
- ç©ºé—´å¤æ‚åº¦
  - è¿­ä»£: $O(1)$
  - é€’å½’ï¼š $O(logN)$ï¼ˆæ— å°¾è°ƒç”¨æ¶ˆé™¤ï¼‰

> åé¢çš„å¤æ‚åº¦ä¹Ÿæ˜¯ç±»ä¼¼çš„ï¼Œä¸å†èµ˜è¿°ã€‚

è¿™ç§æœç´¢ç®—æ³•æ¯ä¸€æ¬¡æ¯”è¾ƒéƒ½ä½¿æœç´¢èŒƒå›´ç¼©å°ä¸€åŠï¼Œæ˜¯å…¸å‹çš„äºŒåˆ†æŸ¥æ‰¾ã€‚

è¿™ä¸ªæ˜¯äºŒåˆ†æŸ¥æ‰¾ä¸­æœ€ç®€ç­”çš„ä¸€ç§ç±»å‹äº†ï¼Œæˆ‘ä»¬å…ˆæ¥æå®šå®ƒã€‚ æˆ‘ä»¬æ¥ä¸€ä¸ªå…·ä½“çš„ä¾‹å­ï¼Œ è¿™æ ·æ–¹ä¾¿å¤§å®¶å¢åŠ ä»£å…¥æ„Ÿã€‚å‡è®¾ nums ä¸º `[1,3,4,6,7,8,10,13,14]`ï¼Œ target ä¸º 4Â·ã€‚

- åˆšå¼€å§‹æ•°ç»„ä¸­é—´çš„å…ƒç´ ä¸º 7
- 7 > 4 ï¼Œç”±äº 7 å³è¾¹çš„æ•°å­—éƒ½å¤§äº 7 ï¼Œå› æ­¤ä¸å¯èƒ½æ˜¯ç­”æ¡ˆã€‚æˆ‘ä»¬å°†èŒƒå›´ç¼©å†™åˆ°äº† 7 çš„å·¦ä¾§ã€‚
- æ­¤æ—¶ä¸­é—´å…ƒç´ ä¸º 3
- 3 < 4ï¼Œç”±äº 3 å·¦è¾¹çš„æ•°å­—éƒ½å°äº 3 ï¼Œå› æ­¤ä¸å¯èƒ½æ˜¯ç­”æ¡ˆã€‚æˆ‘ä»¬å°†èŒƒå›´ç¼©å†™åˆ°äº† 3 çš„å³ä¾§ã€‚
- æ­¤æ—¶ä¸­é—´å…ƒç´ ä¸º 4ï¼Œæ­£å¥½æ˜¯æˆ‘ä»¬è¦æ‰¾çš„ï¼Œè¿”å›å…¶ç´¢å¼• 2 å³å¯ã€‚

å¦‚ä½•å°†ä¸Šé¢çš„ç®—æ³•è½¬æ¢ä¸ºå®¹æ˜“ç†è§£çš„å¯æ‰§è¡Œä»£ç å‘¢ï¼Ÿå°±ç®—æ˜¯è¿™æ ·ä¸€ä¸ªç®€ç®€å•å•ï¼Œæœ´å®æ— åçš„äºŒåˆ†æŸ¥æ‰¾ï¼Œ ä¸åŒçš„äººå†™å‡ºæ¥çš„å·®åˆ«ä¹Ÿæ˜¯å¾ˆå¤§çš„ã€‚ å¦‚æœæ²¡æœ‰ä¸€ä¸ªæ€ç»´æ¡†æ¶æŒ‡å¯¼ä½ ï¼Œé‚£ä¹ˆä½ åœ¨ä¸åŒçš„æ—¶é—´å¯èƒ½ä¼šå†™å‡ºå·®å¼‚å¾ˆå¤§çš„ä»£ç ã€‚è¿™æ ·çš„è¯ï¼Œä½ çŠ¯é”™çš„å‡ ç‡ä¼šå¤§å¤§å¢åŠ ã€‚

è¿™é‡Œç»™å¤§å®¶ä»‹ç»ä¸€ä¸ªæˆ‘ç»å¸¸ä½¿ç”¨çš„æ€ç»´æ¡†æ¶å’Œä»£ç æ¨¡æ¿ã€‚

#### æ€ç»´æ¡†æ¶

** é¦–å…ˆå®šä¹‰æœç´¢åŒºé—´ä¸º [left, right]ï¼Œæ³¨æ„æ˜¯å·¦å³éƒ½é—­åˆï¼Œä¹‹åä¼šç”¨åˆ°è¿™ä¸ªç‚¹ **

> ä½ å¯ä»¥å®šä¹‰åˆ«çš„æœç´¢åŒºé—´å½¢å¼ï¼Œä¸è¿‡åé¢çš„ä»£ç ä¹Ÿç›¸åº”è¦è°ƒæ•´ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥è¯•è¯•åˆ«çš„æœç´¢åŒºé—´ã€‚

- ç”±äºå®šä¹‰çš„æœç´¢åŒºé—´ä¸º [left, right]ï¼Œå› æ­¤å½“ left <= right çš„æ—¶å€™ï¼Œæœç´¢åŒºé—´éƒ½ä¸ä¸ºç©ºï¼Œæ­¤æ—¶æˆ‘ä»¬éƒ½éœ€è¦ç»§ç»­æœç´¢ã€‚ ä¹Ÿå°±æ˜¯è¯´ç»ˆæ­¢æœç´¢æ¡ä»¶åº”è¯¥ä¸º left <= rightã€‚

> ä¸¾ä¸ªä¾‹å­å®¹æ˜“æ˜ç™½ä¸€ç‚¹ã€‚ æ¯”å¦‚å¯¹äºåŒºé—´ [4,4]ï¼Œå…¶åŒ…å«äº†ä¸€ä¸ªå…ƒç´  4ï¼Œå› æ­¤æœç´¢åŒºé—´ä¸ä¸ºç©ºï¼Œéœ€è¦ç»§ç»­æœç´¢ï¼ˆè¯•æƒ³ 4 æ°å¥½æ˜¯æˆ‘ä»¬è¦æ‰¾çš„ targetï¼Œå¦‚æœä¸ç»§ç»­æœç´¢ï¼Œ ä¼šé”™è¿‡æ­£ç¡®ç­”æ¡ˆï¼‰ã€‚è€Œå½“æœç´¢åŒºé—´ä¸º [left, right) çš„æ—¶å€™ï¼ŒåŒæ ·å¯¹äº [4,4)ï¼Œè¿™ä¸ªæ—¶å€™æœç´¢åŒºé—´å´æ˜¯ç©ºçš„ï¼Œå› ä¸ºè¿™æ ·çš„ä¸€ä¸ªåŒºé—´ä¸å­˜åœ¨ä»»ä½•æ•°å­—Â·ã€‚

- å¾ªç¯ä½“å†…ï¼Œæˆ‘ä»¬ä¸æ–­è®¡ç®— mid ï¼Œå¹¶å°† nums[mid] ä¸ ç›®æ ‡å€¼æ¯”å¯¹ã€‚
  - å¦‚æœ nums[mid] ç­‰äºç›®æ ‡å€¼ï¼Œ åˆ™æå‰è¿”å› midï¼ˆåªéœ€è¦æ‰¾åˆ°ä¸€ä¸ªæ»¡è¶³æ¡ä»¶çš„å³å¯ï¼‰
  - å¦‚æœ nums[mid] å°äºç›®æ ‡å€¼ï¼Œ è¯´æ˜ç›®æ ‡å€¼åœ¨ mid å³ä¾§ï¼Œè¿™ä¸ªæ—¶å€™æœç´¢åŒºé—´å¯ç¼©å°ä¸º [mid + 1, right] ï¼ˆmid ä»¥åŠ mid å·¦ä¾§çš„æ•°å­—è¢«æˆ‘ä»¬æ’é™¤åœ¨å¤–ï¼‰
  - å¦‚æœ nums[mid] å¤§äºç›®æ ‡å€¼ï¼Œ è¯´æ˜ç›®æ ‡å€¼åœ¨ mid å·¦ä¾§ï¼Œè¿™ä¸ªæ—¶å€™æœç´¢åŒºé—´å¯ç¼©å°ä¸º [left, mid - 1] ï¼ˆmid ä»¥åŠ mid å³ä¾§çš„æ•°å­—è¢«æˆ‘ä»¬æ’é™¤åœ¨å¤–ï¼‰
- å¾ªç¯ç»“æŸéƒ½æ²¡æœ‰æ‰¾åˆ°ï¼Œåˆ™è¯´æ˜æ‰¾ä¸åˆ°ï¼Œè¿”å› -1 è¡¨ç¤ºæœªæ‰¾åˆ°ã€‚

#### ä»£ç æ¨¡æ¿

##### Java

```java
public int binarySearch(int[] nums, int target) {
    // å·¦å³éƒ½é—­åˆçš„åŒºé—´ [l, r]
    int left = 0;
    int right = nums.length - 1;

    while(left <= right) {
        int mid = left + (right - left) / 2;
        if(nums[mid] == target)
            return mid;
        if (nums[mid] < target)
			      // æœç´¢åŒºé—´å˜ä¸º [mid+1, right]
            left = mid + 1;
        if (nums[mid] > target)
            // æœç´¢åŒºé—´å˜ä¸º [left, mid - 1]
            right = mid - 1;
    }
    return -1;
}
```

##### Python

```py
def binarySearch(nums, target):
    # å·¦å³éƒ½é—­åˆçš„åŒºé—´ [l, r]
    l, r = 0, len(nums) - 1
    while l <= r:
        mid = (left + right) >> 1
        if nums[mid] == target: return mid
        # æœç´¢åŒºé—´å˜ä¸º [mid+1, right]
        if nums[mid] < target: l = mid + 1
        # æœç´¢åŒºé—´å˜ä¸º [left, mid - 1]
        if nums[mid] > target: r = mid - 1
    return -1

```

##### JavaScript

```js
function binarySearch(nums, target) {
  let left = 0;
  let right = nums.length - 1;
  while (left <= right) {
    const mid = Math.floor(left + (right - left) / 2);
    if (nums[mid] == target) return mid;
    if (nums[mid] < target)
      // æœç´¢åŒºé—´å˜ä¸º [mid+1, right]
      left = mid + 1;
    if (nums[mid] > target)
      // æœç´¢åŒºé—´å˜ä¸º [left, mid - 1]
      right = mid - 1;
  }
  return -1;
}
```

##### C++

```cpp
int binarySearch(vector<int>& nums, int target){
  if(nums.size() == 0)
    return -1;

  int left = 0, right = nums.size() - 1;
  while(left <= right){
    int mid = left + ((right - left) >> 1);
    if(nums[mid] == target){ return mid; }
    // æœç´¢åŒºé—´å˜ä¸º [mid+1, right]
    else if(nums[mid] < target)
	left = mid + 1;
    // æœç´¢åŒºé—´å˜ä¸º [left, mid - 1]
    else
	right = mid - 1;
  }
  return -1;
}
```

### å¯»æ‰¾æœ€å·¦è¾¹çš„æ»¡è¶³æ¡ä»¶çš„å€¼

å’Œ`æŸ¥æ‰¾ä¸€ä¸ªæ•°`ç±»ä¼¼ï¼Œ æˆ‘ä»¬ä»ç„¶å¥—ç”¨`æŸ¥æ‰¾ä¸€ä¸ªæ•°`çš„æ€ç»´æ¡†æ¶å’Œä»£ç æ¨¡æ¿ã€‚

#### æ€ç»´æ¡†æ¶

- é¦–å…ˆå®šä¹‰æœç´¢åŒºé—´ä¸º [left, right]ï¼Œæ³¨æ„æ˜¯å·¦å³éƒ½é—­åˆï¼Œä¹‹åä¼šç”¨åˆ°è¿™ä¸ªç‚¹ã€‚
- ç»ˆæ­¢æœç´¢æ¡ä»¶ä¸º left <= rightã€‚
- å¾ªç¯ä½“å†…ï¼Œæˆ‘ä»¬ä¸æ–­è®¡ç®— mid ï¼Œå¹¶å°† nums[mid] ä¸ ç›®æ ‡å€¼æ¯”å¯¹ã€‚
  - å¦‚æœ nums[mid] ç­‰äºç›®æ ‡å€¼ï¼Œ åˆ™æ”¶ç¼©å³è¾¹ç•Œï¼Œæˆ‘ä»¬æ‰¾åˆ°äº†ä¸€ä¸ªå¤‡èƒï¼Œç»§ç»­çœ‹çœ‹å·¦è¾¹è¿˜æœ‰æ²¡æœ‰äº†ï¼ˆ**æ³¨æ„è¿™é‡Œä¸ä¸€æ ·**ï¼‰
  - å¦‚æœ nums[mid] å°äºç›®æ ‡å€¼ï¼Œ è¯´æ˜ç›®æ ‡å€¼åœ¨ mid å³ä¾§ï¼Œè¿™ä¸ªæ—¶å€™æœç´¢åŒºé—´å¯ç¼©å°ä¸º [mid + 1, right]
  - å¦‚æœ nums[mid] å¤§äºç›®æ ‡å€¼ï¼Œ è¯´æ˜ç›®æ ‡å€¼åœ¨ mid å·¦ä¾§ï¼Œè¿™ä¸ªæ—¶å€™æœç´¢åŒºé—´å¯ç¼©å°ä¸º [left, mid - 1]
- ç”±äºä¸ä¼šæå‰è¿”å›ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦æ£€æŸ¥æœ€ç»ˆçš„ leftï¼Œçœ‹ nums[left]æ˜¯å¦ç­‰äº targetã€‚
  - å¦‚æœä¸ç­‰äº targetï¼Œæˆ–è€… left å‡ºäº†å³è¾¹è¾¹ç•Œäº†ï¼Œè¯´æ˜è‡³æ­»éƒ½æ²¡æœ‰æ‰¾åˆ°ä¸€ä¸ªå¤‡èƒï¼Œåˆ™è¿”å› -1.
  - å¦åˆ™è¿”å› left å³å¯ï¼Œå¤‡èƒè½¬æ­£ã€‚

#### ä»£ç æ¨¡æ¿

> å®é™…ä¸Š nums[mid] > target å’Œ nums[mid] == target æ˜¯å¯ä»¥åˆå¹¶çš„ã€‚æˆ‘è¿™é‡Œä¸ºäº†æ¸…æ™°ï¼Œå°±æ²¡æœ‰åˆå¹¶ï¼Œå¤§å®¶ç†Ÿæ‚‰ä¹‹ååˆå¹¶èµ·æ¥å³å¯ã€‚

##### Java

```java
public int binarySearchLeft(int[] nums, int target) {
	// æœç´¢åŒºé—´ä¸º [left, right]
    int left = 0;
    int right = nums.length - 1;
    while (left <= right) {
        int mid = left + (right - left) / 2;
        if (nums[mid] < target) {
            // æœç´¢åŒºé—´å˜ä¸º [mid+1, right]
            left = mid + 1;
        }
        if (nums[mid] > target) {
            // æœç´¢åŒºé—´å˜ä¸º [left, mid-1]
            right = mid - 1;
        }
        if (nums[mid] == target) {
            // æ”¶ç¼©å³è¾¹ç•Œ
            right = mid - 1;
        }
    }
    // æ£€æŸ¥æ˜¯å¦è¶Šç•Œ
    if (left >= nums.length || nums[left] != target)
        return -1;
    return left;
}
```

##### Python

```py
def binarySearchLeft(nums, target):
    # å·¦å³éƒ½é—­åˆçš„åŒºé—´ [l, r]
    l, r = 0, len(nums) - 1
    while l <= r:
        mid = (l + r) >> 1
        if nums[mid] == target:
            # æ”¶ç¼©å³è¾¹ç•Œ
            r = mid - 1;
        # æœç´¢åŒºé—´å˜ä¸º [mid+1, right]
        if nums[mid] < target: l = mid + 1
        # æœç´¢åŒºé—´å˜ä¸º [left, mid - 1]
        if nums[mid] > target: r = mid - 1
    if l >= len(nums) or nums[l] != target: return -1
    return l

```

##### JavaScript

```js
function binarySearchLeft(nums, target) {
  let left = 0;
  let right = nums.length - 1;
  while (left <= right) {
    const mid = Math.floor(left + (right - left) / 2);
    if (nums[mid] == target)
      // æ”¶ç¼©å³è¾¹ç•Œ
      right = mid - 1;
    if (nums[mid] < target)
      // æœç´¢åŒºé—´å˜ä¸º [mid+1, right]
      left = mid + 1;
    if (nums[mid] > target)
      // æœç´¢åŒºé—´å˜ä¸º [left, mid - 1]
      right = mid - 1;
  }
  // æ£€æŸ¥æ˜¯å¦è¶Šç•Œ
  if (left >= nums.length || nums[left] != target) return -1;
  return left;
}
```

##### C++

```cpp
int binarySearchLeft(vector<int>& nums, int target) {
	// æœç´¢åŒºé—´ä¸º [left, right]
    int left = 0, right = nums.size() - 1;
    while (left <= right) {
        int mid = left + ((right - left) >> 1);
        if (nums[mid] == target) {
            // æ”¶ç¼©å³è¾¹ç•Œ
            right = mid - 1;
        }
        if (nums[mid] < target) {
            // æœç´¢åŒºé—´å˜ä¸º [mid+1, right]
            left = mid + 1;
        }
        if (nums[mid] > target) {
            // æœç´¢åŒºé—´å˜ä¸º [left, mid-1]
            right = mid - 1;
        }
    }
    // æ£€æŸ¥æ˜¯å¦è¶Šç•Œ
    if (left >= nums.size() || nums[left] != target)
        return -1;
    return left;
}
```

#### ä¾‹é¢˜è§£æ

ç»™ä½ ä¸€ä¸ªä¸¥æ ¼é€’å¢çš„æ•°ç»„ nums ï¼Œè®©ä½ æ‰¾åˆ°ç¬¬ä¸€ä¸ªæ»¡è¶³ nums[i] == i çš„ç´¢å¼•ï¼Œå¦‚æœæ²¡æœ‰è¿™æ ·çš„ç´¢å¼•ï¼Œè¿”å› -1ã€‚ï¼ˆä½ çš„ç®—æ³•éœ€è¦æœ‰ logN çš„å¤æ‚åº¦ï¼‰ã€‚

é¦–å…ˆæˆ‘ä»¬åšä¸€ä¸ªå°å°çš„å˜æ¢ï¼Œå°†åŸæ•°ç»„ nums è½¬æ¢ä¸º Aï¼Œå…¶ä¸­ A[i] = nums[i] - iã€‚è¿™æ ·æ–°çš„æ•°ç»„ A å°±æ˜¯ä¸€ä¸ªä¸ä¸¥æ ¼é€’å¢çš„æ•°ç»„ã€‚è¿™æ ·åŸé—®é¢˜è½¬æ¢ä¸º åœ¨ä¸€ä¸ªä¸ä¸¥æ ¼é€’å¢çš„æ•°ç»„ A ä¸­æ‰¾ç¬¬ä¸€ä¸ªç­‰äº 0 çš„ç´¢å¼•ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨æœ€å·¦æ»¡è¶³æ¨¡æ¿ï¼Œæ‰¾åˆ°æœ€å·¦æ»¡è¶³ nums[i] == i çš„ç´¢å¼•ã€‚

ä»£ç ï¼š

```py
class Solution:
    def solve(self, nums):
        l, r = 0, len(nums) - 1
        while l <= r:
            mid = (l + r) // 2
            if nums[mid] >= mid:
                r = mid - 1
            else:
                l = mid + 1
        return l if l < len(nums) and nums[l] == l else -1
```

### å¯»æ‰¾æœ€å³è¾¹çš„æ»¡è¶³æ¡ä»¶çš„å€¼

å’Œ`æŸ¥æ‰¾ä¸€ä¸ªæ•°`ç±»ä¼¼ï¼Œ æˆ‘ä»¬ä»ç„¶å¥—ç”¨`æŸ¥æ‰¾ä¸€ä¸ªæ•°`çš„æ€ç»´æ¡†æ¶å’Œä»£ç æ¨¡æ¿ã€‚

> æœ‰æ²¡æœ‰æ„Ÿå—åˆ°æ¡†æ¶å’Œæ¨¡æ¿çš„åŠ›é‡ï¼Ÿ

#### æ€ç»´æ¡†æ¶

- é¦–å…ˆå®šä¹‰æœç´¢åŒºé—´ä¸º [left, right]ï¼Œæ³¨æ„æ˜¯å·¦å³éƒ½é—­åˆï¼Œä¹‹åä¼šç”¨åˆ°è¿™ä¸ªç‚¹ã€‚

> ä½ å¯ä»¥å®šä¹‰åˆ«çš„æœç´¢åŒºé—´å½¢å¼ï¼Œä¸è¿‡åé¢çš„ä»£ç ä¹Ÿç›¸åº”è¦è°ƒæ•´ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥è¯•è¯•åˆ«çš„æœç´¢åŒºé—´ã€‚

- ç”±äºæˆ‘ä»¬å®šä¹‰çš„æœç´¢åŒºé—´ä¸º [left, right]ï¼Œå› æ­¤å½“ left <= right çš„æ—¶å€™ï¼Œæœç´¢åŒºé—´éƒ½ä¸ä¸ºç©ºã€‚ ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬çš„ç»ˆæ­¢æœç´¢æ¡ä»¶ä¸º left <= rightã€‚

> ä¸¾ä¸ªä¾‹å­å®¹æ˜“æ˜ç™½ä¸€ç‚¹ã€‚ æ¯”å¦‚å¯¹äºåŒºé—´ [4,4]ï¼Œå…¶åŒ…å«äº†ä¸€ä¸ªå…ƒç´  4ï¼Œå› æ­¤æœç´¢åŒºé—´ä¸ä¸ºç©ºã€‚è€Œå½“æœç´¢åŒºé—´ä¸º [left, right) çš„æ—¶å€™ï¼ŒåŒæ ·å¯¹äº [4,4)ï¼Œè¿™ä¸ªæ—¶å€™æœç´¢åŒºé—´å´æ˜¯ç©ºçš„ã€‚

- å¾ªç¯ä½“å†…ï¼Œæˆ‘ä»¬ä¸æ–­è®¡ç®— mid ï¼Œå¹¶å°† nums[mid] ä¸ ç›®æ ‡å€¼æ¯”å¯¹ã€‚
  - å¦‚æœ nums[mid] ç­‰äºç›®æ ‡å€¼ï¼Œ åˆ™æ”¶ç¼©å·¦è¾¹ç•Œï¼Œæˆ‘ä»¬æ‰¾åˆ°äº†ä¸€ä¸ªå¤‡èƒï¼Œç»§ç»­çœ‹çœ‹å³è¾¹è¿˜æœ‰æ²¡æœ‰äº†
  - å¦‚æœ nums[mid] å°äºç›®æ ‡å€¼ï¼Œ è¯´æ˜ç›®æ ‡å€¼åœ¨ mid å³ä¾§ï¼Œè¿™ä¸ªæ—¶å€™æœç´¢åŒºé—´å¯ç¼©å°ä¸º [mid + 1, right]
  - å¦‚æœ nums[mid] å¤§äºç›®æ ‡å€¼ï¼Œ è¯´æ˜ç›®æ ‡å€¼åœ¨ mid å·¦ä¾§ï¼Œè¿™ä¸ªæ—¶å€™æœç´¢åŒºé—´å¯ç¼©å°ä¸º [left, mid - 1]
- ç”±äºä¸ä¼šæå‰è¿”å›ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦æ£€æŸ¥æœ€ç»ˆçš„ rightï¼Œçœ‹ nums[right]æ˜¯å¦ç­‰äº targetã€‚
  - å¦‚æœä¸ç­‰äº targetï¼Œæˆ–è€… right å‡ºäº†å·¦è¾¹è¾¹ç•Œäº†ï¼Œè¯´æ˜è‡³æ­»éƒ½æ²¡æœ‰æ‰¾åˆ°ä¸€ä¸ªå¤‡èƒï¼Œåˆ™è¿”å› -1.
  - å¦åˆ™è¿”å› right å³å¯ï¼Œå¤‡èƒè½¬æ­£ã€‚

#### ä»£ç æ¨¡æ¿

> å®é™…ä¸Š nums[mid] < target å’Œ nums[mid] == target æ˜¯å¯ä»¥åˆå¹¶çš„ã€‚æˆ‘è¿™é‡Œä¸ºäº†æ¸…æ™°ï¼Œå°±æ²¡æœ‰åˆå¹¶ï¼Œå¤§å®¶ç†Ÿæ‚‰ä¹‹ååˆå¹¶èµ·æ¥å³å¯ã€‚

##### Java

```java
public int binarySearchRight(int[] nums, int target) {
	// æœç´¢åŒºé—´ä¸º [left, right]
    int left = 0
    int right = nums.length - 1;
    while (left <= right) {
        int mid = left + (right - left) / 2;
        if (nums[mid] < target) {
			// æœç´¢åŒºé—´å˜ä¸º [mid+1, right]
            left = mid + 1;
        }
        if (nums[mid] > target) {
			// æœç´¢åŒºé—´å˜ä¸º [left, mid-1]
            right = mid - 1;
        }
        if (nums[mid] == target) {
            // æ”¶ç¼©å·¦è¾¹ç•Œ
            left = mid + 1;
        }
    }
    // æ£€æŸ¥æ˜¯å¦è¶Šç•Œ
    if (right < 0 || nums[right] != target)
        return -1;
    return right;
}
```

##### Python

```py
def binarySearchRight(nums, target):
    # å·¦å³éƒ½é—­åˆçš„åŒºé—´ [l, r]
    l, r = 0, len(nums) - 1
    while l <= r:
        mid = (l + r) >> 1
        if nums[mid] == target:
            # æ”¶ç¼©å·¦è¾¹ç•Œ
            l = mid + 1;
        # æœç´¢åŒºé—´å˜ä¸º [mid+1, right]
        if nums[mid] < target: l = mid + 1
        # æœç´¢åŒºé—´å˜ä¸º [left, mid - 1]
        if nums[mid] > target: r = mid - 1
    if r < 0 or nums[r] != target: return -1
    return r
```

##### JavaScript

```js
function binarySearchRight(nums, target) {
  let left = 0;
  let right = nums.length - 1;
  while (left <= right) {
    const mid = Math.floor(left + (right - left) / 2);
    if (nums[mid] == target)
      // æ”¶ç¼©å·¦è¾¹ç•Œ
      left = mid + 1;
    if (nums[mid] < target)
      // æœç´¢åŒºé—´å˜ä¸º [mid+1, right]
      left = mid + 1;
    if (nums[mid] > target)
      // æœç´¢åŒºé—´å˜ä¸º [left, mid - 1]
      right = mid - 1;
  }
  // æ£€æŸ¥æ˜¯å¦è¶Šç•Œ
  if (right < 0 || nums[right] != target) return -1;
  return right;
}
```

##### C++

```cpp
int binarySearchRight(vector<int>& nums, int target) {
	// æœç´¢åŒºé—´ä¸º [left, right]
    int left = 0, right = nums.size() - 1;
    while (left <= right) {
        int mid = left + ((right - left) >> 1);
         if (nums[mid] == target) {
            // æ”¶ç¼©å·¦è¾¹ç•Œ
            left = mid + 1;
        }
        if (nums[mid] < target) {
			// æœç´¢åŒºé—´å˜ä¸º [mid+1, right]
            left = mid + 1;
        }
        if (nums[mid] > target) {
			// æœç´¢åŒºé—´å˜ä¸º [left, mid-1]
            right = mid - 1;
        }
    }
    // æ£€æŸ¥æ˜¯å¦è¶Šç•Œ
    if (right < 0 || nums[right] != target)
        return -1;
    return right;
}
```

### å¯»æ‰¾æœ€å·¦æ’å…¥ä½ç½®

ä¸Šé¢æˆ‘ä»¬è®²äº†`å¯»æ‰¾æœ€å·¦æ»¡è¶³æ¡ä»¶çš„å€¼`ã€‚å¦‚æœæ‰¾ä¸åˆ°ï¼Œå°±è¿”å› -1ã€‚é‚£å¦‚æœæˆ‘æƒ³è®©ä½ æ‰¾ä¸åˆ°ä¸æ˜¯è¿”å› -1ï¼Œè€Œæ˜¯åº”è¯¥æ’å…¥çš„ä½ç½®ï¼Œä½¿å¾—æ’å…¥ä¹‹ååˆ—è¡¨ä»ç„¶æœ‰åºå‘¢ï¼Ÿ

æ¯”å¦‚ä¸€ä¸ªæ•°ç»„ nums: [1,3,4]ï¼Œtarget æ˜¯ 2ã€‚æˆ‘ä»¬åº”è¯¥å°†å…¶æ’å…¥ï¼ˆæ³¨æ„ä¸æ˜¯çœŸçš„æ’å…¥ï¼‰çš„ä½ç½®æ˜¯ç´¢å¼• 1 çš„ä½ç½®ï¼Œå³ [1,**2**,3,4]ã€‚å› æ­¤`å¯»æ‰¾æœ€å·¦æ’å…¥ä½ç½®`åº”è¯¥è¿”å› 1ï¼Œè€Œ`å¯»æ‰¾æœ€å·¦æ»¡è¶³æ¡ä»¶` åº”è¯¥è¿”å›-1ã€‚

å¦å¤–å¦‚æœæœ‰å¤šä¸ªæ»¡è¶³æ¡ä»¶çš„å€¼ï¼Œæˆ‘ä»¬è¿”å›æœ€å·¦ä¾§çš„ã€‚ æ¯”å¦‚ä¸€ä¸ªæ•°ç»„ nums: [1,2,2,2,3,4]ï¼Œtarget æ˜¯ 2ï¼Œæˆ‘ä»¬åº”è¯¥æ’å…¥çš„ä½ç½®æ˜¯ 1ã€‚

#### æ€ç»´æ¡†æ¶

å¦‚æœä½ å°†**å¯»æ‰¾æœ€å·¦æ’å…¥ä½ç½®**çœ‹æˆæ˜¯**å¯»æ‰¾æœ€å·¦æ»¡è¶³**å¤§äºç­‰äº x çš„ä½ç½®ï¼Œé‚£å°±å¯ä»¥å’Œå‰é¢çš„çŸ¥è¯†äº§ç”Ÿè”ç³»ï¼Œä½¿å¾—ä»£ç æ›´åŠ ç»Ÿä¸€ã€‚

æ¯”å¦‚ä¸€ä¸ªæ•°ç»„ nums: [1,2,2,2,3,4]ï¼Œtarget æ˜¯ 2ï¼Œå¯»æ‰¾æœ€å³æ»¡è¶³å°äº 2 çš„ä½ç½®æ˜¯ 0ï¼Œ + 1 å°±æ˜¯ 1ï¼Œè¿™å…¶å®å°±æ˜¯æœ€å·¦æ’å…¥ä½ç½®ã€‚

å…·ä½“ç®—æ³•ï¼š

- é¦–å…ˆå®šä¹‰æœç´¢åŒºé—´ä¸º [left, right]ï¼Œæ³¨æ„æ˜¯å·¦å³éƒ½é—­åˆï¼Œä¹‹åä¼šç”¨åˆ°è¿™ä¸ªç‚¹ã€‚

> ä½ å¯ä»¥å®šä¹‰åˆ«çš„æœç´¢åŒºé—´å½¢å¼ï¼Œä¸è¿‡åé¢çš„ä»£ç ä¹Ÿç›¸åº”è¦è°ƒæ•´ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥è¯•è¯•åˆ«çš„æœç´¢åŒºé—´ã€‚

- ç”±äºæˆ‘ä»¬å®šä¹‰çš„æœç´¢åŒºé—´ä¸º [left, right]ï¼Œå› æ­¤å½“ left <= right çš„æ—¶å€™ï¼Œæœç´¢åŒºé—´éƒ½ä¸ä¸ºç©ºã€‚ ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬çš„ç»ˆæ­¢æœç´¢æ¡ä»¶ä¸º left <= rightã€‚

- å½“ A[mid] >= xï¼Œè¯´æ˜æ‰¾åˆ°ä¸€ä¸ªå¤‡èƒï¼Œæˆ‘ä»¬ä»¤ r = mid - 1 å°† mid ä»æœç´¢åŒºé—´æ’é™¤ï¼Œç»§ç»­çœ‹çœ‹æœ‰æ²¡æœ‰æ›´å¥½çš„å¤‡èƒã€‚
- å½“ A[mid] < xï¼Œè¯´æ˜ mid æ ¹æœ¬å°±ä¸æ˜¯ç­”æ¡ˆï¼Œç›´æ¥æ›´æ–° l = mid + 1ï¼Œä»è€Œå°† mid ä»æœç´¢åŒºé—´æ’é™¤ã€‚
- æœ€åæœç´¢åŒºé—´çš„ l å°±æ˜¯æœ€å¥½çš„å¤‡èƒï¼Œå¤‡èƒè½¬æ­£ã€‚

#### ä»£ç æ¨¡æ¿

##### Python

```py
def bisect_left(A, x):
    # å†…ç½® api
    bisect.bisect_left(A, x)
    # æ‰‹å†™
    l, r = 0, len(A) - 1
    while l <= r:
        mid = (l + r) // 2
        if A[mid] >= x: r = mid - 1
        else: l = mid + 1
    return l
```

å…¶ä»–è¯­è¨€æš‚æ—¶ç©ºç¼ºï¼Œæ¬¢è¿ [PR](https://github.com/azl397985856/leetcode-cheat/issues/4)

### å¯»æ‰¾æœ€å³æ’å…¥ä½ç½®

#### æ€ç»´æ¡†æ¶

å¦‚æœä½ å°†**å¯»æ‰¾æœ€å³æ’å…¥ä½ç½®**çœ‹æˆæ˜¯**å¯»æ‰¾æœ€å³æ»¡è¶³**å¤§äºç­‰äº x çš„å€¼ï¼ˆè¿˜éœ€è¦åŠ  1ï¼‰ï¼Œé‚£å°±å¯ä»¥å’Œå‰é¢çš„çŸ¥è¯†äº§ç”Ÿè”ç³»ï¼Œä½¿å¾—ä»£ç æ›´åŠ ç»Ÿä¸€ã€‚

æ¯”å¦‚ä¸€ä¸ªæ•°ç»„ nums: [1,2,2,2,3,4]ï¼Œtarget æ˜¯ 2ï¼Œå¯»æ‰¾æœ€å·¦æ»¡è¶³å¤§äº 2 çš„ä½ç½®æ˜¯ 4ï¼Œè¿™å…¶å®å°±æ˜¯æœ€å³æ’å…¥ä½ç½®ã€‚

å…·ä½“ç®—æ³•ï¼š

- é¦–å…ˆå®šä¹‰æœç´¢åŒºé—´ä¸º [left, right]ï¼Œæ³¨æ„æ˜¯å·¦å³éƒ½é—­åˆï¼Œä¹‹åä¼šç”¨åˆ°è¿™ä¸ªç‚¹ã€‚

> ä½ å¯ä»¥å®šä¹‰åˆ«çš„æœç´¢åŒºé—´å½¢å¼ï¼Œä¸è¿‡åé¢çš„ä»£ç ä¹Ÿç›¸åº”è¦è°ƒæ•´ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥è¯•è¯•åˆ«çš„æœç´¢åŒºé—´ã€‚

- ç”±äºæˆ‘ä»¬å®šä¹‰çš„æœç´¢åŒºé—´ä¸º [left, right]ï¼Œå› æ­¤å½“ left <= right çš„æ—¶å€™ï¼Œæœç´¢åŒºé—´éƒ½ä¸ä¸ºç©ºã€‚ ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬çš„ç»ˆæ­¢æœç´¢æ¡ä»¶ä¸º left <= rightã€‚

- å½“ A[mid] > xï¼Œè¯´æ˜æ‰¾åˆ°ä¸€ä¸ªå¤‡èƒï¼Œæˆ‘ä»¬ä»¤ r = mid - 1 å°† mid ä»æœç´¢åŒºé—´æ’é™¤ï¼Œç»§ç»­çœ‹çœ‹æœ‰æ²¡æœ‰æ›´å¥½çš„å¤‡èƒã€‚
- å½“ A[mid] <= xï¼Œè¯´æ˜ mid æ ¹æœ¬å°±ä¸æ˜¯ç­”æ¡ˆï¼Œç›´æ¥æ›´æ–° l = mid + 1ï¼Œä»è€Œå°† mid ä»æœç´¢åŒºé—´æ’é™¤ã€‚
- æœ€åæœç´¢åŒºé—´çš„ l å°±æ˜¯æœ€å¥½çš„å¤‡èƒï¼Œå¤‡èƒè½¬æ­£ã€‚

#### ä»£ç æ¨¡æ¿

##### Python

```py

def bisect_right(A, x):
    # å†…ç½® api
    bisect.bisect_right(A, x)
    # æ‰‹å†™
    l, r = 0, len(A) - 1
    while l <= r:
        mid = (l + r) // 2
        if A[mid] <= x: l = mid + 1
        else: r = mid - 1
    return l # æˆ–è€…è¿”å› r + 1
```

å…¶ä»–è¯­è¨€æš‚æ—¶ç©ºç¼ºï¼Œæ¬¢è¿ [PR](https://github.com/azl397985856/leetcode-cheat/issues/4)

### å°ç»“

å¯¹äºäºŒåˆ†é¢˜ç›®é¦–å…ˆè¦æ˜ç¡®è§£ç©ºé—´ï¼Œç„¶åæ ¹æ®ä¸€å®šæ¡ä»¶ï¼ˆé€šå¸¸æ˜¯å’Œä¸­é—´å€¼æ¯”è¾ƒï¼‰ï¼Œèˆå¼ƒå…¶ä¸­ä¸€åŠçš„è§£ã€‚å¤§å®¶å¯ä»¥å…ˆä»æŸ¥æ‰¾æ»¡è¶³æ¡ä»¶çš„å€¼çš„äºŒåˆ†å…¥æ‰‹ï¼Œè¿›è€Œå­¦ä¹ æœ€å·¦å’Œæœ€å³äºŒåˆ†ã€‚åŒæ—¶å¤§å®¶åªéœ€è¦æŒæ¡æœ€å·¦å’Œæœ€å³äºŒåˆ†å³å¯ï¼Œå› æ­¤åè€…åŠŸèƒ½å¤§äºå‰è€…ã€‚

å¯¹äºæœ€å·¦å’Œæœ€å³äºŒåˆ†ï¼Œç®€å•ç”¨ä¸¤å¥è¯æ€»ç»“ä¸€ä¸‹ï¼š

1. æœ€å·¦äºŒåˆ†ä¸æ–­æ”¶ç¼©å³è¾¹ç•Œï¼Œæœ€ç»ˆè¿”å›å·¦è¾¹ç•Œ

2. æœ€å³äºŒåˆ†ä¸æ–­æ”¶ç¼©å·¦è¾¹ç•Œï¼Œæœ€ç»ˆè¿”å›å³è¾¹ç•Œ

 é‚£å¦‚æœè§£ç©ºé—´ä¸ä»…ä»…æ˜¯æ•´æ•°å‘¢ï¼Ÿè€Œæ˜¯å®æ•°å‘¢ï¼Ÿä»£ç æ”¹å¦‚ä½•ä¹¦å†™ï¼Ÿ è¿™å…¶å®è¿™å°±æ˜¯å‰æ–‡æåˆ°çš„å®æ•°äºŒåˆ†ã€‚æˆ‘ä»¬æ¥çœ‹ä¸‹ä»£ç æœ‰ä»€ä¹ˆä¸åŒã€‚

ä¼ªä»£ç ï¼š

```cpp
const double eps = 1e-6;   // eps è¡¨ç¤ºç²¾åº¦ï¼Œå–å†³äºé¢˜ç›®å¯¹ç²¾åº¦çš„è¦æ±‚
while (r - l > eps)
{
    double mid = (l + r) / 2;
    if (check(mid)) r = mid;
    else l = mid;
}
return l;
```

å¯ä»¥çœ‹å‡ºæ­£å¦‚å‰é¢æ‰€è¯´ï¼Œå®æ•°äºŒåˆ†ï¼š

- å¾ªç¯ç»ˆæ­¢æ¡ä»¶æ˜¯è§£ç©ºé—´å¤§å°
- äºŒåˆ†çš„æ—¶å€™ç›´æ¥å°† mid èµ‹å€¼ç»™ l æˆ– r å³å¯ï¼Œè€Œä¸å†æ˜¯å®æ•°çš„ r - 1 æˆ–è€… l + 1ï¼Œå› æ­¤è¿™æ ·ä¼šé”™å¤±æ­£è§£ã€‚

æœ€å³æ’å…¥äºŒåˆ†å’Œæœ€å·¦æ’å…¥äºŒåˆ†ç»“åˆå¯ä»¥å®ç°ä¸€äº›å¾ˆæœ‰ç”¨çš„åŠŸèƒ½ã€‚æ¯”å¦‚åœ¨æœ‰åºæ•°ç»„ arr ä¸­æ±‚è§£ [left,right] èŒƒå›´å†…å€¼çš„ä¸ªæ•°å°±å¯ä»¥ç”¨ `bisect_right(arr, right)-bisect_left(arr, left)` æ±‚å‡ºã€‚å…¶ä¸­ `bisect_right(arr, right)`å¯ä»¥æ±‚å‡ºå°äºç­‰äº right çš„ä¸ªæ•°ï¼Œè€Œ `bisect_right(arr, left)` å¯ä»¥æ±‚å‡ºå°äº left çš„ä¸ªæ•°ï¼Œæ ¹æ®é›†åˆæ±‚å·®çš„åŸç†ï¼Œç›¸å‡å³ä¸ºå€¼åœ¨ [left,right] èŒƒå›´çš„ä¸ªæ•°ã€‚è¿™ä¸ªé›†åˆæ±‚å·®æŠ€å·§æˆ‘åœ¨å‰ç¼€å’Œéƒ¨åˆ†ä¹Ÿè®²è¿‡ã€‚å¤§å®¶å¯ä»¥ç”¨ [åŒºé—´å†…æŸ¥è¯¢æ•°å­—çš„é¢‘ç‡](https://leetcode-cn.com/problems/range-frequency-queries/) ç»ƒä¹ ä¸€ä¸‹è¿™ä¸ªæŠ€å·§ã€‚

### å±€éƒ¨æœ‰åºï¼ˆå…ˆé™åå‡æˆ–å…ˆå‡åé™ï¼‰

LeetCode æœ‰åŸé¢˜ [33. æœç´¢æ—‹è½¬æ’åºæ•°ç»„](https://leetcode-cn.com/problems/search-in-rotated-sorted-array/) å’Œ [81. æœç´¢æ—‹è½¬æ’åºæ•°ç»„ II](https://leetcode-cn.com/problems/search-in-rotated-sorted-array-ii/)ï¼Œæˆ‘ä»¬ç›´æ¥æ‹¿è¿‡æ¥è®²è§£å¥½äº†ã€‚

å…¶ä¸­ 81 é¢˜æ˜¯åœ¨ 33 é¢˜çš„åŸºç¡€ä¸Šå¢åŠ äº†`åŒ…å«é‡å¤å…ƒç´ `çš„å¯èƒ½ï¼Œå®é™…ä¸Š 33 é¢˜çš„è¿›é˜¶å°±æ˜¯ 81 é¢˜ã€‚é€šè¿‡è¿™é“é¢˜ï¼Œå¤§å®¶å¯ä»¥æ„Ÿå—åˆ°â€åŒ…å«é‡å¤ä¸å¦å¯¹æˆ‘ä»¬ç®—æ³•çš„å½±å“â€œã€‚ æˆ‘ä»¬ç›´æ¥ä¸Šæœ€å¤æ‚çš„ 81 é¢˜ï¼Œè¿™ä¸ªä¼šäº†ï¼Œå¯ä»¥ç›´æ¥ AC ç¬¬ 33 é¢˜ã€‚

#### 81. æœç´¢æ—‹è½¬æ’åºæ•°ç»„ II

##### é¢˜ç›®æè¿°

```
å‡è®¾æŒ‰ç…§å‡åºæ’åºçš„æ•°ç»„åœ¨é¢„å…ˆæœªçŸ¥çš„æŸä¸ªç‚¹ä¸Šè¿›è¡Œäº†æ—‹è½¬ã€‚

( ä¾‹å¦‚ï¼Œæ•°ç»„Â [0,0,1,2,2,5,6]Â å¯èƒ½å˜ä¸ºÂ [2,5,6,0,0,1,2]Â )ã€‚

ç¼–å†™ä¸€ä¸ªå‡½æ•°æ¥åˆ¤æ–­ç»™å®šçš„ç›®æ ‡å€¼æ˜¯å¦å­˜åœ¨äºæ•°ç»„ä¸­ã€‚è‹¥å­˜åœ¨è¿”å›Â trueï¼Œå¦åˆ™è¿”å›Â falseã€‚

ç¤ºä¾‹Â 1:

è¾“å…¥: nums = [2,5,6,0,0,1,2], target = 0
è¾“å‡º: true
ç¤ºä¾‹Â 2:

è¾“å…¥: nums = [2,5,6,0,0,1,2], target = 3
è¾“å‡º: false
è¿›é˜¶:

è¿™æ˜¯ æœç´¢æ—‹è½¬æ’åºæ•°ç»„Â çš„å»¶ä¼¸é¢˜ç›®ï¼Œæœ¬é¢˜ä¸­çš„Â numsÂ  å¯èƒ½åŒ…å«é‡å¤å…ƒç´ ã€‚
è¿™ä¼šå½±å“åˆ°ç¨‹åºçš„æ—¶é—´å¤æ‚åº¦å—ï¼Ÿä¼šæœ‰æ€æ ·çš„å½±å“ï¼Œä¸ºä»€ä¹ˆï¼Ÿ

```

##### æ€è·¯

è¿™æ˜¯ä¸€ä¸ªæˆ‘åœ¨ç½‘ä¸Šçœ‹åˆ°çš„å‰ç«¯å¤´æ¡æŠ€æœ¯ç»ˆé¢çš„ä¸€ä¸ªç®—æ³•é¢˜ã€‚æˆ‘ä»¬å…ˆä¸è€ƒè™‘é‡å¤å…ƒç´ ã€‚

é¢˜ç›®è¦æ±‚æ—¶é—´å¤æ‚åº¦ä¸º lognï¼Œå› æ­¤åŸºæœ¬å°±æ˜¯äºŒåˆ†æ³•äº†ã€‚ è¿™é“é¢˜ç›®ä¸æ˜¯ç›´æ¥çš„æœ‰åºæ•°ç»„ï¼Œä¸ç„¶å°±æ˜¯ easy äº†ã€‚

é¦–å…ˆè¦çŸ¥é“ï¼Œæˆ‘ä»¬éšä¾¿é€‰æ‹©ä¸€ä¸ªç‚¹ï¼Œå°†æ•°ç»„åˆ†ä¸ºå‰åä¸¤éƒ¨åˆ†ï¼Œå…¶ä¸­ä¸€éƒ¨åˆ†ä¸€å®šæ˜¯æœ‰åºçš„ã€‚

å…·ä½“æ­¥éª¤ï¼š

- æˆ‘ä»¬å¯ä»¥å…ˆæ‰¾å‡º midï¼Œç„¶åæ ¹æ® mid æ¥åˆ¤æ–­ï¼Œmid æ˜¯åœ¨æœ‰åºçš„éƒ¨åˆ†è¿˜æ˜¯æ— åºçš„éƒ¨åˆ†

å‡å¦‚ mid å°äº startï¼Œåˆ™ mid ä¸€å®šåœ¨å³è¾¹æœ‰åºéƒ¨åˆ†ï¼Œå³ [mid,end] éƒ¨åˆ†æœ‰åºã€‚å‡å¦‚ mid å¤§äº startï¼Œåˆ™ mid ä¸€å®šåœ¨å·¦è¾¹æœ‰åºéƒ¨åˆ†ï¼Œå³ [start,mid]éƒ¨åˆ†æœ‰åºã€‚**è¿™æ˜¯è¿™ç±»é¢˜ç›®çš„çªç ´å£ã€‚**

> æ³¨æ„æˆ‘æ²¡æœ‰è€ƒè™‘ç­‰å·ï¼Œä¹‹åæˆ‘ä¼šè®²ã€‚

- ç„¶åæˆ‘ä»¬ç»§ç»­åˆ¤æ–­ target åœ¨å“ªä¸€éƒ¨åˆ†ï¼Œ å°±å¯ä»¥èˆå¼ƒå¦ä¸€éƒ¨åˆ†äº†ã€‚

ä¹Ÿå°±æ˜¯è¯´åªéœ€è¦æ¯”è¾ƒ target å’Œ**æœ‰åºéƒ¨åˆ†**çš„è¾¹ç•Œå…³ç³»å°±è¡Œäº†ã€‚ æ¯”å¦‚ mid åœ¨å³ä¾§æœ‰åºéƒ¨åˆ†ï¼Œå³[mid,end] æœ‰åºã€‚é‚£ä¹ˆæˆ‘ä»¬åªéœ€è¦åˆ¤æ–­ target >= mid && target <= end å°±èƒ½çŸ¥é“ target åœ¨å³ä¾§æœ‰åºéƒ¨åˆ†ï¼Œæˆ‘ä»¬å°±å¯ä»¥èˆå¼ƒå·¦è¾¹éƒ¨åˆ†äº†(é€šè¿‡ start = mid + 1 å®ç°)ï¼Œ åä¹‹äº¦ç„¶ã€‚

æˆ‘ä»¬ä»¥([6,7,8,1,2,3,4,5], 4)ä¸ºä¾‹è®²è§£ä¸€ä¸‹ï¼š

![](./01.äºŒåˆ†.assets/0.jpg)

![](./01.äºŒåˆ†.assets/1.jpg)

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è€ƒè™‘é‡å¤å…ƒç´ çš„é—®é¢˜ã€‚å¦‚æœå­˜åœ¨é‡å¤æ•°å­—ï¼Œå°±å¯èƒ½ä¼šå‘ç”Ÿ nums[mid] == nums[start] äº†ï¼Œæ¯”å¦‚ 30333 ã€‚è¿™ä¸ªæ—¶å€™å¯ä»¥é€‰æ‹©èˆå¼ƒ startï¼Œä¹Ÿå°±æ˜¯ start å³ç§»ä¸€ä½ã€‚æœ‰çš„åŒå­¦ä¼šæ‹…å¿ƒâ€ä¼šä¸ä¼šé”™å¤±ç›®æ ‡å…ƒç´ ï¼Ÿâ€œã€‚å…¶å®è¿™ä¸ªæ‹…å¿ƒæ˜¯å¤šä½™çš„ï¼Œå‰é¢æˆ‘ä»¬å·²ç»ä»‹ç»äº†â€ æœç´¢åŒºé—´â€œã€‚ç”±äºæœç´¢åŒºé—´åŒæ—¶åŒ…å« start å’Œ mid ï¼Œå› æ­¤å»é™¤ä¸€ä¸ª start ï¼Œæˆ‘ä»¬è¿˜æœ‰ midã€‚å‡å¦‚ 3 æ˜¯æˆ‘ä»¬è¦æ‰¾çš„å…ƒç´ ï¼Œ è¿™æ ·è¿›è¡Œä¸‹å»ç»å¯¹ä¸ä¼šé”™è¿‡ï¼Œè€Œæ˜¯æ”¶ç¼©â€æœç´¢åŒºé—´â€œåˆ°ä¸€ä¸ªå…ƒç´  3 ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¿ƒå®‰ç†å¾—åœ°è¿”å› 3 äº†ã€‚

##### ä»£ç ï¼ˆPythonï¼‰

```python
class Solution:
    def search(self, nums, target):
        l, r = 0, len(nums)-1
        while l <= r:
            mid = l + (r-l)//2
            if nums[mid] == target:
                return True
            while l < mid and nums[l] == nums[mid]:  # tricky part
                l += 1
            # the first half is ordered
            if nums[l] <= nums[mid]:
                # target is in the first half
                if nums[l] <= target < nums[mid]:
                    r = mid - 1
                else:
                    l = mid + 1
            # the second half is ordered
            else:
                # target is in the second half
                if nums[mid] < target <= nums[r]:
                    l = mid + 1
                else:
                    r = mid - 1
        return False

```

**å¤æ‚åº¦åˆ†æ**

- æ—¶é—´å¤æ‚åº¦ï¼š$O(log N)$
- ç©ºé—´å¤æ‚åº¦ï¼š$O(1)$

##### æ‰©å±•

å¦‚æœé¢˜ç›®ä¸æ˜¯è®©ä½ è¿”å› true å’Œ falseï¼Œè€Œæ˜¯è¿”å›æœ€å·¦/æœ€å³ç­‰äº targrt çš„ç´¢å¼•å‘¢ï¼Ÿè¿™ä¸å°±åˆå’Œå‰é¢çš„çŸ¥è¯†å»ºç«‹è”ç³»äº†ä¹ˆï¼Ÿæ¯”å¦‚æˆ‘è®©ä½ åœ¨ä¸€ä¸ªæ—‹è½¬æ•°ç»„ä¸­æ‰¾æœ€å·¦ç­‰äº target çš„ç´¢å¼•ï¼Œå…¶å®å°±æ˜¯ [é¢è¯•é¢˜ 10.03. æœç´¢æ—‹è½¬æ•°ç»„](https://leetcode-cn.com/problems/search-rotate-array-lcci/)ã€‚

æ€è·¯å’Œå‰é¢çš„æœ€å·¦æ»¡è¶³ç±»ä¼¼ï¼Œä»ç„¶æ˜¯é€šè¿‡å‹ç¼©åŒºé—´ï¼Œæ›´æ–°å¤‡èƒï¼Œæœ€åè¿”å›å¤‡èƒçš„æ–¹å¼æ¥å®ç°ã€‚ å…·ä½“çœ‹ä»£ç å§ã€‚

Python Code:

```py
class Solution:
    def search(self, nums: List[int], target: int) -> int:
        l, r = 0, len(nums) - 1
        while l <= r:
            mid = l + (r - l) // 2
            # # the first half is ordered
            if nums[l] < nums[mid]:
                # target is in the first half
                if nums[l] <= target <= nums[mid]:
                    r = mid - 1
                else:
                    l = mid + 1
            # # the second half is ordered
            elif nums[l] > nums[mid]:
                # target is in the second half
                if nums[l] <= target or target <= nums[mid]:
                    r = mid - 1
                else:
                    l = mid + 1
            elif nums[l] == nums[mid]:
                if nums[l] != target:
                    l += 1
                else:
                    # l æ˜¯ä¸€ä¸ªå¤‡èƒ
                    r = l - 1
        return l if l < len(nums) and nums[l] == target else -1

```

### äºŒç»´æ•°ç»„

äºŒç»´æ•°ç»„çš„äºŒåˆ†æŸ¥æ‰¾å’Œä¸€ç»´æ²¡æœ‰æœ¬è´¨åŒºåˆ«ï¼Œ æˆ‘ä»¬é€šè¿‡ä¸¤ä¸ªé¢˜æ¥è¿›è¡Œè¯´æ˜ã€‚

#### 74. æœç´¢äºŒç»´çŸ©é˜µ

##### é¢˜ç›®åœ°å€

https://leetcode-cn.com/problems/search-a-2d-matrix/

##### é¢˜ç›®æè¿°

```
ç¼–å†™ä¸€ä¸ªé«˜æ•ˆçš„ç®—æ³•æ¥åˆ¤æ–­Â m x nÂ çŸ©é˜µä¸­ï¼Œæ˜¯å¦å­˜åœ¨ä¸€ä¸ªç›®æ ‡å€¼ã€‚è¯¥çŸ©é˜µå…·æœ‰å¦‚ä¸‹ç‰¹æ€§ï¼š

æ¯è¡Œä¸­çš„æ•´æ•°ä»å·¦åˆ°å³æŒ‰å‡åºæ’åˆ—ã€‚
æ¯è¡Œçš„ç¬¬ä¸€ä¸ªæ•´æ•°å¤§äºå‰ä¸€è¡Œçš„æœ€åä¸€ä¸ªæ•´æ•°ã€‚
ç¤ºä¾‹Â 1:

è¾“å…¥:
matrix = [
  [1,   3,  5,  7],
  [10, 11, 16, 20],
  [23, 30, 34, 50]
]
target = 3
è¾“å‡º: true
ç¤ºä¾‹Â 2:

è¾“å…¥:
matrix = [
  [1,   3,  5,  7],
  [10, 11, 16, 20],
  [23, 30, 34, 50]
]
target = 13
è¾“å‡º: false

```

##### æ€è·¯

ç®€å•æ¥è¯´å°±æ˜¯å°†ä¸€ä¸ªä¸€ç»´æœ‰åºæ•°ç»„åˆ‡æˆè‹¥å¹²é•¿åº¦ç›¸åŒçš„æ®µï¼Œç„¶åå°†è¿™äº›æ®µæ‹¼æ¥æˆä¸€ä¸ªäºŒç»´æ•°ç»„ã€‚ä½ çš„ä»»åŠ¡å°±æ˜¯åœ¨è¿™ä¸ªæ‹¼æ¥æˆçš„äºŒç»´æ•°ç»„ä¸­æ‰¾åˆ° targetã€‚

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ•°ç»„æ˜¯ä¸å­˜åœ¨é‡å¤å…ƒç´ çš„ã€‚

> å¦‚æœæœ‰é‡å¤å…ƒç´ ï¼Œæˆ‘ä»¬è¯¥æ€ä¹ˆåŠï¼Ÿ

ç®—æ³•ï¼š

- é€‰æ‹©çŸ©é˜µå·¦ä¸‹è§’ä½œä¸ºèµ·å§‹å…ƒç´  Q
- å¦‚æœ Q > targetï¼Œå³æ–¹å’Œä¸‹æ–¹çš„å…ƒç´ æ²¡æœ‰å¿…è¦çœ‹äº†ï¼ˆç›¸å¯¹äºä¸€ç»´æ•°ç»„çš„å³è¾¹å…ƒç´ ï¼‰
- å¦‚æœ Q < targetï¼Œå·¦æ–¹å’Œä¸Šæ–¹çš„å…ƒç´ æ²¡æœ‰å¿…è¦çœ‹äº†ï¼ˆç›¸å¯¹äºä¸€ç»´æ•°ç»„çš„å·¦è¾¹å…ƒç´ ï¼‰
- å¦‚æœ Q == target ï¼Œç›´æ¥ è¿”å› True
- äº¤å›äº†éƒ½æ‰¾ä¸åˆ°ï¼Œè¿”å› False

##### ä»£ç (Python)

```py


class Solution:
    def searchMatrix(self, matrix: List[List[int]], target: int) -> bool:
        m = len(matrix)
        if m == 0:
            return False
        n = len(matrix[0])

        x = m - 1
        y = 0
        while x >= 0 and y < n:
            if matrix[x][y] > target:
                x -= 1
            elif matrix[x][y] < target:
                y += 1
            else:
                return True
        return False

```

**å¤æ‚åº¦åˆ†æ**

- æ—¶é—´å¤æ‚åº¦ï¼šæœ€åçš„æƒ…å†µæ˜¯åªæœ‰ä¸€è¡Œæˆ–è€…åªæœ‰ä¸€åˆ—ï¼Œæ­¤æ—¶æ—¶é—´å¤æ‚åº¦ä¸º $O(M * N)$ã€‚æ›´å¤šçš„æƒ…å†µä¸‹æ—¶é—´å¤æ‚åº¦ä¸º $O(M + N)$
- ç©ºé—´å¤æ‚åº¦ï¼š$O(1)$

åŠ›æ‰£ [240. æœç´¢äºŒç»´çŸ©é˜µ II](https://leetcode-cn.com/problems/search-a-2d-matrix-ii/) å‘ç”Ÿäº†ä¸€ç‚¹å˜åŒ–ï¼Œä¸å†æ˜¯`æ¯è¡Œçš„ç¬¬ä¸€ä¸ªæ•´æ•°å¤§äºå‰ä¸€è¡Œçš„æœ€åä¸€ä¸ªæ•´æ•°`ï¼Œè€Œæ˜¯ `æ¯åˆ—çš„å…ƒç´ ä»ä¸Šåˆ°ä¸‹å‡åºæ’åˆ—`ã€‚æˆ‘ä»¬ä»ç„¶å¯ä»¥é€‰æ‹©å·¦ä¸‹è¿›è¡ŒäºŒåˆ†ã€‚

### å¯»æ‰¾æœ€å€¼(æ”¹è¿›çš„äºŒåˆ†)

ä¸Šé¢å…¨éƒ¨éƒ½æ˜¯æ‰¾åˆ°ç»™å®šå€¼ï¼Œè¿™æ¬¡æˆ‘ä»¬è¯•å›¾å¯»æ‰¾æœ€å€¼ï¼ˆæœ€å°æˆ–è€…æœ€å¤§ï¼‰ã€‚æˆ‘ä»¬ä»¥æœ€å°ä¸ºä¾‹ï¼Œè®²è§£ä¸€ä¸‹è¿™ç§é¢˜å¦‚ä½•åˆ‡å…¥ã€‚

##### 153. å¯»æ‰¾æ—‹è½¬æ’åºæ•°ç»„ä¸­çš„æœ€å°å€¼

##### é¢˜ç›®åœ°å€

https://leetcode-cn.com/problems/find-minimum-in-rotated-sorted-array/

##### é¢˜ç›®æè¿°

```
å‡è®¾æŒ‰ç…§å‡åºæ’åºçš„æ•°ç»„åœ¨é¢„å…ˆæœªçŸ¥çš„æŸä¸ªç‚¹ä¸Šè¿›è¡Œäº†æ—‹è½¬ã€‚

( ä¾‹å¦‚ï¼Œæ•°ç»„Â [0,1,2,4,5,6,7] å¯èƒ½å˜ä¸ºÂ [4,5,6,7,0,1,2]Â )ã€‚

è¯·æ‰¾å‡ºå…¶ä¸­æœ€å°çš„å…ƒç´ ã€‚

ä½ å¯ä»¥å‡è®¾æ•°ç»„ä¸­ä¸å­˜åœ¨é‡å¤å…ƒç´ ã€‚

ç¤ºä¾‹ 1:

è¾“å…¥: [3,4,5,1,2]
è¾“å‡º: 1
ç¤ºä¾‹ 2:

è¾“å…¥: [4,5,6,7,0,1,2]
è¾“å‡º: 0

```

##### äºŒåˆ†æ³•

###### æ€è·¯

å’ŒæŸ¥æ‰¾æŒ‡å®šå€¼å¾—æ€è·¯ä¸€æ ·ã€‚æˆ‘ä»¬è¿˜æ˜¯ï¼š

- åˆå§‹åŒ–é¦–å°¾æŒ‡é’ˆ l å’Œ r
- å¦‚æœ nums[mid] å¤§äº nums[r]ï¼Œè¯´æ˜ mid åœ¨å·¦ä¾§æœ‰åºéƒ¨åˆ†ï¼Œç”±äºæœ€å°çš„ä¸€å®šåœ¨å³ä¾§ï¼Œå› æ­¤å¯ä»¥æ”¶ç¼©å·¦åŒºé—´ï¼Œå³ l = mid + 1
- å¦åˆ™æ”¶ç¼©å³ä¾§ï¼Œå³ r = midï¼ˆä¸å¯ä»¥ r = mid - 1ï¼‰

> è¿™é‡Œå¤šåˆ¤æ–­ç­‰å·æ²¡æœ‰æ„ä¹‰ï¼Œå› ä¸ºé¢˜ç›®æ²¡æœ‰è®©æˆ‘ä»¬æ‰¾æŒ‡å®šå€¼

- å½“ l >= r æˆ–è€… nums[l] < nums[r] çš„æ—¶å€™é€€å‡ºå¾ªç¯

> nums[l] < nums[r]ï¼Œè¯´æ˜åŒºé—´ [l, r] å·²ç»æ˜¯æ•´ä½“æœ‰åºäº†ï¼Œå› æ­¤ nums[l] å°±æ˜¯æˆ‘ä»¬æƒ³è¦æ‰¾çš„

###### ä»£ç ï¼ˆPythonï¼‰

```py


class Solution:
    def findMin(self, nums: List[int]) -> int:
        l, r = 0, len(nums) - 1

        while l < r:
            # important
            if nums[l] < nums[r]:
                return nums[l]
            mid = (l + r) // 2
            # left part
            if nums[mid] > nums[r]:
                l = mid + 1
            else:
                # right part
                r = mid
        # l or r is not important
        return nums[l]

```

**å¤æ‚åº¦åˆ†æ**

- æ—¶é—´å¤æ‚åº¦ï¼š$O(log N)$
- ç©ºé—´å¤æ‚åº¦ï¼š$O(1)$

##### å¦ä¸€ç§äºŒåˆ†æ³•

###### æ€è·¯

æˆ‘ä»¬å½“ç„¶ä¹Ÿä¹Ÿå¯ä»¥å’Œ nums[l] æ¯”è¾ƒï¼Œè€Œä¸æ˜¯ä¸Šé¢çš„ nums[r]ï¼Œæˆ‘ä»¬å‘ç°ï¼š

- æ—‹è½¬ç‚¹å·¦ä¾§å…ƒç´ **éƒ½å¤§äº**æ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ 

- æ—‹è½¬ç‚¹å³ä¾§å…ƒç´ **éƒ½å°äº**æ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ 

è¿™æ ·å°±å»ºç«‹äº† nums[mid] å’Œ nums[0] çš„è”ç³»ã€‚

å…·ä½“ç®—æ³•ï¼š

1. æ‰¾åˆ°æ•°ç»„çš„ä¸­é—´å…ƒç´  midã€‚

2. å¦‚æœä¸­é—´å…ƒç´  > æ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ mid å³è¾¹æœç´¢ã€‚

![](./01.äºŒåˆ†.assets/2.jpg)

- å¦‚æœä¸­é—´å…ƒç´  <= æ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ mid å·¦è¾¹æœç´¢ã€‚

ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œä¸­é—´å…ƒç´  6 æ¯”ç¬¬ä¸€ä¸ªå…ƒç´  4 å¤§ï¼Œå› æ­¤åœ¨ä¸­é—´ç‚¹å³ä¾§ç»§ç»­æœç´¢ã€‚

3. å½“æˆ‘ä»¬æ‰¾åˆ°æ—‹è½¬ç‚¹æ—¶åœæ­¢æœç´¢ï¼Œå½“ä»¥ä¸‹æ¡ä»¶æ»¡è¶³ä»»æ„ä¸€ä¸ªå³å¯ï¼š

- nums[mid] > nums[mid + 1]ï¼Œå› æ­¤ mid+1 æ˜¯æœ€å°å€¼ã€‚

- nums[mid - 1] > nums[mid]ï¼Œå› æ­¤ mid æ˜¯æœ€å°å€¼ã€‚

![](./01.äºŒåˆ†.assets/3.jpg)

###### ä»£ç ï¼ˆPythonï¼‰

```py
class Solution:
    def findMin(self, nums):
        # If the list has just one element then return that element.
        if len(nums) == 1:
            return nums[0]

        # left pointer
        left = 0
        # right pointer
        right = len(nums) - 1

        # if the last element is greater than the first element then there is no rotation.
        # e.g. 1 < 2 < 3 < 4 < 5 < 7. Already sorted array.
        # Hence the smallest element is first element. A[0]
        if nums[right] > nums[0]:
            return nums[0]

        # Binary search way
        while right >= left:
            # Find the mid element
            mid = left + (right - left) / 2
            # if the mid element is greater than its next element then mid+1 element is the smallest
            # This point would be the point of change. From higher to lower value.
            if nums[mid] > nums[mid + 1]:
                return nums[mid + 1]
            # if the mid element is lesser than its previous element then mid element is the smallest
            if nums[mid - 1] > nums[mid]:
                return nums[mid]

            # if the mid elements value is greater than the 0th element this means
            # the least value is still somewhere to the right as we are still dealing with elements greater than nums[0]
            if nums[mid] > nums[0]:
                left = mid + 1
            # if nums[0] is greater than the mid value then this means the smallest value is somewhere to the left
            else:
                right = mid - 1

```

**å¤æ‚åº¦åˆ†æ**

- æ—¶é—´å¤æ‚åº¦ï¼š$O(log N)$
- ç©ºé—´å¤æ‚åº¦ï¼š$O(1)$

### äºŒå‰æ ‘

å¯¹äºä¸€ä¸ªç»™å®šçš„äºŒå‰æ ‘ï¼Œå…¶ä»»æ„èŠ‚ç‚¹æœ€å¤šåªæœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹ã€‚ ä»è¿™ä¸ªå®šä¹‰ï¼Œæˆ‘ä»¬ä¼¼ä¹å¯ä»¥å—…å‡ºä¸€ç‚¹äºŒåˆ†æ³•çš„å‘³é“ï¼Œ ä½†æ˜¯è¿™å¹¶ä¸æ˜¯äºŒåˆ†ã€‚ä½†æ˜¯ï¼ŒäºŒå‰æ ‘ä¸­å´å’ŒäºŒåˆ†æœ‰å¾ˆå¤šè”ç³»ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ã€‚

æœ€ç®€å•çš„ï¼Œå¦‚æœè¿™ä¸ªäºŒå‰æ ‘æ˜¯ä¸€ä¸ªäºŒå‰æœç´¢æ ‘ï¼ˆBSTï¼‰ã€‚ é‚£ä¹ˆå®é™…ä¸Šï¼Œåœ¨ä¸€ä¸ªäºŒå‰æœç´¢æ ‘ç§è¿›è¡Œæœç´¢çš„è¿‡ç¨‹å°±æ˜¯äºŒåˆ†æ³•ã€‚

![](./01.äºŒåˆ†.assets/4.jpg)

å¦‚ä¸Šå›¾ï¼Œæˆ‘ä»¬éœ€è¦åœ¨è¿™æ ·ä¸€ä¸ªäºŒå‰æœç´¢æ ‘ä¸­æœç´¢ 7ã€‚é‚£ä¹ˆæˆ‘ä»¬çš„æœç´¢è·¯å¾„åˆ™ä¼šæ˜¯ 8 -> 3 -> 6 -> 7ï¼Œè¿™ä¹Ÿæ˜¯ä¸€ç§äºŒåˆ†æ³•ã€‚åªä¸è¿‡ç›¸æ¯”äºæ™®é€šçš„**æœ‰åºåºåˆ—æŸ¥æ‰¾ç»™å®šå€¼**äºŒåˆ†ï¼Œ å…¶æ—¶é—´å¤æ‚åº¦çš„ä¸‹ç•Œæ›´å·®ï¼ŒåŸå› åœ¨äºäºŒå‰æœç´¢æ ‘å¹¶ä¸ä¸€å®šæ˜¯äºŒå‰å¹³è¡¡æ ‘ã€‚

ä¸Šé¢è®²äº†äºŒå‰æœç´¢æ ‘ï¼Œæˆ‘ä»¬å†æ¥çœ‹ä¸€ç§åŒæ ·ç‰¹æ®Šçš„æ ‘ - å®Œå…¨äºŒå‰æ ‘ã€‚ å¦‚æœæˆ‘ä»¬ç»™ä¸€é¢—å®Œå…¨äºŒå‰æ ‘çš„æ‰€æœ‰èŠ‚ç‚¹è¿›è¡Œç¼–å·ï¼ˆäºŒè¿›åˆ¶ï¼‰ï¼Œä¾æ¬¡ä¸º 01,10,11, ...ã€‚

![](./01.äºŒåˆ†.assets/5.jpg)

é‚£ä¹ˆå®é™…ä¸Šï¼Œæœ€åä¸€è¡Œçš„ç¼–å·å°±æ˜¯ä»æ ¹èŠ‚ç‚¹åˆ°è¯¥èŠ‚ç‚¹çš„è·¯å¾„ã€‚ å…¶ä¸­ 0 è¡¨ç¤ºå‘å·¦ï¼Œ 1 è¡¨ç¤ºå‘å³ã€‚(ç¬¬ä¸€ä½æ•°å­—ä¸ç”¨)ã€‚ æˆ‘ä»¬ä»¥æœ€åä¸€è¡Œçš„ 101 ä¸ºä¾‹ï¼Œæˆ‘ä»¬éœ€è¦æ‰§è¡Œä¸€æ¬¡å·¦ï¼Œç„¶åä¸€æ¬¡å³ã€‚

![](./01.äºŒåˆ†.assets/6.jpg)

å…¶å®åŸç†ä¹Ÿä¸éš¾ï¼Œå¦‚æœä½ ç”¨æ•°ç»„è¡¨ç¤ºè¿‡å®Œå…¨äºŒå‰æ ‘ï¼Œé‚£ä¹ˆå°±å¾ˆå®¹æ˜“ç†è§£ã€‚ æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œçˆ¶èŠ‚ç‚¹çš„ç¼–å·éƒ½æ˜¯å·¦èŠ‚ç‚¹çš„äºŒå€ï¼Œå¹¶ä¸”éƒ½æ˜¯å³èŠ‚ç‚¹çš„äºŒå€ + 1ã€‚ä»äºŒè¿›åˆ¶çš„è§’åº¦æ¥çœ‹å°±æ˜¯ï¼š**çˆ¶èŠ‚ç‚¹çš„ç¼–å·å·¦ç§»ä¸€ä½å°±æ˜¯å·¦èŠ‚ç‚¹çš„ç¼–å·ï¼Œå·¦ç§»ä¸€ä½ + 1 å°±æ˜¯å³èŠ‚ç‚¹çš„ç¼–å·**ã€‚ å› æ­¤åè¿‡æ¥ï¼Œ çŸ¥é“äº†å­èŠ‚ç‚¹çš„æœ€åä¸€ä½ï¼Œæˆ‘ä»¬å°±èƒ½çŸ¥é“å®ƒæ˜¯çˆ¶èŠ‚ç‚¹çš„å·¦èŠ‚ç‚¹è¿˜æ˜¯å³èŠ‚ç‚¹å•¦ã€‚

## é¢˜ç›®æ¨è

- [875. çˆ±åƒé¦™è•‰çš„ç‚ç‚](https://leetcode-cn.com/problems/koko-eating-bananas/)
- [2141. Maximum Running Time of N Computers å®˜æ–¹é¢˜è§£](https://leetcode.com/problems/maximum-running-time-of-n-computers/editorial) å¼ºçƒˆæ¨è ğŸ‘

## æ•°å­¦åŸºç¡€

ä¸ºäº†æ–¹ä¾¿æ–°æ‰‹ç†è§£ï¼Œå‰é¢è®²çš„å†…å®¹ä½¿ç”¨çš„æ˜¯è‡ªç„¶è¯­è¨€ï¼Œå°½å¯èƒ½é€šä¿—ã€‚

è¿™é‡Œæˆ‘ä»¬ç¨å¾®å¢åŠ ä¸€ç‚¹æ•°å­¦çŸ¥è¯†ï¼Œå¸®ä½ ä»å¦å¤–ä¸€ä¸ªæ–¹å‘ç†è§£ã€‚

å‰é¢æˆ‘ä»¬æåˆ°äº†è§£ç©ºé—´çš„æ¦‚å¿µï¼Œ è§£ç©ºé—´æŒ‡çš„æ˜¯**é¢˜ç›®æ‰€æœ‰å¯èƒ½çš„è§£æ„æˆçš„é›†åˆ**ã€‚æ¯”å¦‚ä¸€ä¸ªé¢˜ç›®æ‰€æœ‰è§£çš„å¯èƒ½æ˜¯ 1,2,3,4,5ï¼Œä½†å…·ä½“åœ¨æŸä¸€ç§æƒ…å†µåªèƒ½æ˜¯å…¶ä¸­æŸä¸€ä¸ªæ•°ï¼ˆå³å¯èƒ½æ˜¯ 1ï¼Œ2ï¼Œ3ï¼Œ4ï¼Œ5 ä¸­çš„**ä¸€ä¸ªæ•°**ï¼‰ã€‚é‚£ä¹ˆè¿™é‡Œçš„è§£ç©ºé—´å°±æ˜¯ 1,2,3,4,5 æ„æˆçš„é›†åˆã€‚

å¦‚æœæˆ‘ä»¬å°†è§£ç©ºé—´ä½œä¸ºè‡ªå˜é‡ï¼Œç„¶åé€‰å–å¦å¤–ä¸€ä¸ªæŒ‡æ ‡ä½œä¸ºå› å˜é‡ï¼Œå°†å…¶ç”»åˆ°åæ ‡è½´ä¸Šï¼Œä½ ä¼šå‘ç°èƒ½ç”¨äºŒåˆ†æ³•è§£å†³çš„é—®é¢˜åœ¨è¿™ä¸ªåæ ‡è½´çš„å›¾åƒéƒ½æ˜¯ä¸€ä¸ªâ€å‡¸å‡½æ•°â€œï¼Œä¹Ÿæœ‰ä¸€äº›èµ„æ–™å°†å…¶ç§°ä¸ºäºŒæ®µæ€§ï¼Œå…¶å®æ˜¯ä¸€ä¸ªæ„æ€ï¼Œåªä¸è¿‡â€œå‡¸å‡½æ•°â€æ›´ç›´è§‚ã€‚

![](./01.äºŒåˆ†.assets/7.png)

å¦‚æœä¸€ä¸ªå‡½æ•°æ˜¯å‡¸å‡½æ•°ï¼Œæˆ‘ä»¬åˆæƒ³è¦æ±‚å‡¸çš„é‚£ä¸ªæç‚¹ï¼Œå°±å¯ä½¿ç”¨äºŒåˆ†ã€‚

![](./01.äºŒåˆ†.assets/8.png)

å¦‚ä¸Šå›¾ï¼Œé€šè¿‡æ¯”è¾ƒ F(x) å’Œ F(x+1) å°±å¯ä»¥ç¡®å®šæˆ‘ä»¬è¦æ‰¾çš„å‡¸ç‚¹åœ¨å“ªä¸€ä¾§ï¼Œè¿›è€Œèˆå¼ƒä¸€èˆ¬çš„è§£ç©ºé—´ã€‚

> è¿™é‡Œçš„ F(x) å°±æ˜¯æˆ‘ä¸Šé¢è¯´çš„â€œå¦å¤–ä¸€ä¸ªæŒ‡æ ‡ä½œä¸ºå› å˜é‡â€çš„å› å˜é‡ã€‚

è¿™é‡Œæ¨èåŠ›æ‰£å›½é™…ä¸­çš„ä¸€ç¯‡é¢˜è§£ï¼Œé‡Œé¢å½¢è±¡åœ°è§£é‡Šäº†å‡¸å‡½æ•°ï¼Œå…¶å‡½æ•°å›¾åƒä»¥åŠä¸ºä½•å‡¸å‡½æ•°å°±å¯ä»¥ä½¿ç”¨äºŒåˆ†ã€‚via: https://leetcode.com/problems/minimum-cost-to-make-array-equal/editorial/

## å››å¤§åº”ç”¨

åŸºç¡€çŸ¥è¯†é“ºå«äº†å·®ä¸å¤šäº†ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¼€å§‹å¹²è´§æŠ€å·§ã€‚

æ¥ä¸‹æ¥è¦è®²çš„ï¼š

- èƒ½åŠ›æ£€æµ‹å’Œè®¡æ•°äºŒåˆ†æœ¬è´¨å·®ä¸å¤šï¼Œéƒ½æ˜¯**æ™®é€šäºŒåˆ†** çš„æ³›åŒ–ã€‚
- å‰ç¼€å’ŒäºŒåˆ†å’Œæ’å…¥æ’åºäºŒåˆ†ï¼Œæœ¬è´¨éƒ½æ˜¯åœ¨**æ„å»ºæœ‰åºåºåˆ—**ã€‚

é‚£è®©æˆ‘ä»¬å¼€å§‹å§ã€‚

### èƒ½åŠ›æ£€æµ‹äºŒåˆ†

å¦‚æœä¸€é“é¢˜ä½ ä½¿ç”¨çº¯æš´åŠ›è§£æ³•æ„Ÿè§‰å®Œå…¨ä¸å¯èƒ½é€šè¿‡ã€‚ æ¯”å¦‚æš´åŠ›è§£æ³•æ˜¯æšä¸¾æ‰€æœ‰çš„ç»„åˆï¼Œè¿™éœ€è¦æŒ‡æ•°çš„æ—¶é—´ï¼Œè€Œé¢˜ç›®çš„æ•°æ®èŒƒå›´é™å®šåˆ° $10**5$ã€‚è¿™æ˜¾ç„¶æ˜¯æ— æ³•é€šè¿‡çš„ã€‚

é‚£ä¹ˆæˆ‘ä»¬å¾€å¾€éœ€è¦è½¬å˜æ€ç»´ï¼Œå°†é¢˜ç›®è½¬åŒ–ä¸€ç§é—®æ³•ã€‚æ¯”å¦‚ç›´æ¥æ±‚æœ€å°çš„ xxxx æ¯”è¾ƒå›°éš¾ï¼Œé‚£ä¹ˆæ±‚**x æ˜¯å¦å¯è¡Œ**ä¼šä¸ä¼šç®€å•ç‚¹å‘¢ï¼Ÿå¦‚æœ**x æ˜¯å¦å¯è¡Œ**ä¼šç®€å•ç‚¹ã€‚æˆ‘ä»¬æ˜¯å¦å¯ä»¥æšä¸¾æ‰€æœ‰çš„ x æ‰¾åˆ°ç­”æ¡ˆå‘¢ï¼Ÿ

> åŸºç¡€ç¯‡çš„æšä¸¾ç« èŠ‚æç¤ºæˆ‘ä»¬è¿™ç§æƒ…å†µéœ€è¦ä»å°åˆ°å¤§æšä¸¾ï¼Œè¿™æ ·å¯ä»¥å‰ªæ

ç»è¿‡è¿™æ ·çš„å¤„ç†ï¼Œæ—¶é—´å¤æ‚åº¦å¾ˆå¯èƒ½å·²ç»é™ä½äº†å¾ˆå¤šã€‚å¦‚æœé¢˜ç›®æ»¡è¶³å•è°ƒæ€§ï¼Œæ¯”å¦‚ x ä¸è¡Œï¼Œå°äº x çš„éƒ½ä¸è¡Œï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨æœ¬æ–‡æ‰€è®²çš„èƒ½åŠ›æ£€æµ‹äºŒåˆ†è¿›è¡Œæ±‚è§£äº†ã€‚

èƒ½åŠ›æ£€æµ‹äºŒåˆ†ä¸€èˆ¬æ˜¯ï¼šå®šä¹‰å‡½æ•° possibleï¼Œ å‚æ•°æ˜¯ midï¼Œè¿”å›å€¼æ˜¯å¸ƒå°”å€¼ã€‚å¤–å±‚æ ¹æ®è¿”å›å€¼è°ƒæ•´"è§£ç©ºé—´"ã€‚

ç¤ºä¾‹ä»£ç ï¼ˆä»¥æœ€å·¦äºŒåˆ†ä¸ºä¾‹ï¼‰ï¼š

```py
def ability_test_bs(nums):
  def possible(mid):
    pass
  l, r = 0, len(A) - 1
  while l <= r:
      mid = (l + r) // 2
      # åªæœ‰è¿™é‡Œå’Œæœ€å·¦äºŒåˆ†ä¸ä¸€æ ·
      if possible(mid): l = mid + 1
      else: r = mid - 1
  return l
```

å’Œæœ€å·¦æœ€å³äºŒåˆ†è¿™ä¸¤ç§æœ€æœ€åŸºæœ¬çš„ç±»å‹ç›¸æ¯”ï¼Œèƒ½åŠ›æ£€æµ‹äºŒåˆ†**åªæ˜¯å°† while å†…éƒ¨çš„ if è¯­å¥è°ƒæ•´ä¸ºäº†ä¸€ä¸ªå‡½æ•°ç½¢äº†**ã€‚å› æ­¤èƒ½åŠ›æ£€æµ‹äºŒåˆ†ä¹Ÿåˆ†æœ€å·¦å’Œæœ€å³ä¸¤ç§åŸºæœ¬ç±»å‹ã€‚

åŸºæœ¬ä¸Šå¤§å®¶éƒ½å¯ä»¥ç”¨è¿™ä¸ªæ¨¡å¼æ¥å¥—ã€‚æ˜ç¡®äº†è§£é¢˜çš„æ¡†æ¶ï¼Œæˆ‘ä»¬æœ€åæ¥çœ‹ä¸‹èƒ½åŠ›æ£€æµ‹äºŒåˆ†å¯ä»¥è§£å†³å“ªäº›é—®é¢˜ã€‚è¿™é‡Œé€šè¿‡ä¸‰é“é¢˜ç›®å¸¦å¤§å®¶æ„Ÿå—ä¸€ä¸‹ï¼Œç±»ä¼¼çš„é¢˜ç›®è¿˜æœ‰å¾ˆå¤šï¼Œå¤§å®¶è¯¾åè‡ªè¡Œä½“ä¼šã€‚

#### 875. çˆ±åƒé¦™è•‰çš„ç‚ç‚ï¼ˆä¸­ç­‰ï¼‰

##### é¢˜ç›®åœ°å€

https://leetcode-cn.com/problems/koko-eating-bananas/description/

##### é¢˜ç›®æè¿°

```
ç‚ç‚å–œæ¬¢åƒé¦™è•‰ã€‚è¿™é‡Œæœ‰Â NÂ å †é¦™è•‰ï¼Œç¬¬ i å †ä¸­æœ‰Â piles[i]Â æ ¹é¦™è•‰ã€‚è­¦å«å·²ç»ç¦»å¼€äº†ï¼Œå°†åœ¨Â HÂ å°æ—¶åå›æ¥ã€‚

ç‚ç‚å¯ä»¥å†³å®šå¥¹åƒé¦™è•‰çš„é€Ÿåº¦Â KÂ ï¼ˆå•ä½ï¼šæ ¹/å°æ—¶ï¼‰ã€‚æ¯ä¸ªå°æ—¶ï¼Œå¥¹å°†ä¼šé€‰æ‹©ä¸€å †é¦™è•‰ï¼Œä»ä¸­åƒæ‰ K æ ¹ã€‚å¦‚æœè¿™å †é¦™è•‰å°‘äº K æ ¹ï¼Œå¥¹å°†åƒæ‰è¿™å †çš„æ‰€æœ‰é¦™è•‰ï¼Œç„¶åè¿™ä¸€å°æ—¶å†…ä¸ä¼šå†åƒæ›´å¤šçš„é¦™è•‰ã€‚Â Â 

ç‚ç‚å–œæ¬¢æ…¢æ…¢åƒï¼Œä½†ä»ç„¶æƒ³åœ¨è­¦å«å›æ¥å‰åƒæ‰æ‰€æœ‰çš„é¦™è•‰ã€‚

è¿”å›å¥¹å¯ä»¥åœ¨ H å°æ—¶å†…åƒæ‰æ‰€æœ‰é¦™è•‰çš„æœ€å°é€Ÿåº¦ Kï¼ˆK ä¸ºæ•´æ•°ï¼‰ã€‚

Â 

ç¤ºä¾‹ 1ï¼š

è¾“å…¥: piles = [3,6,7,11], H = 8
è¾“å‡º: 4
ç¤ºä¾‹Â 2ï¼š

è¾“å…¥: piles = [30,11,23,4,20], H = 5
è¾“å‡º: 30
ç¤ºä¾‹Â 3ï¼š

è¾“å…¥: piles = [30,11,23,4,20], H = 6
è¾“å‡º: 23
Â 

æç¤ºï¼š

1 <= piles.length <= 10^4
piles.length <= H <= 10^9
1 <= piles[i] <= 10^9


```

##### å‰ç½®çŸ¥è¯†

- äºŒåˆ†æŸ¥æ‰¾

##### å…¬å¸

- å­—èŠ‚

##### æ€è·¯

é¢˜ç›®æ˜¯è®©æˆ‘ä»¬æ±‚**H å°æ—¶å†…åƒæ‰æ‰€æœ‰é¦™è•‰çš„æœ€å°é€Ÿåº¦**ã€‚

ç¬¦åˆç›´è§‰çš„åšæ³•æ˜¯æšä¸¾æ‰€æœ‰å¯èƒ½çš„é€Ÿåº¦ï¼Œæ‰¾å‡ºæ‰€æœ‰çš„å¯ä»¥åƒå®Œé¦™è•‰çš„é€Ÿåº¦ï¼Œæ¥ä¸‹æ¥é€‰æ‹©æœ€å°çš„é€Ÿåº¦å³å¯ã€‚ç”±äºéœ€è¦è¿”å›æœ€å°çš„é€Ÿåº¦ï¼Œå› æ­¤é€‰æ‹©ä»å°åˆ°å¤§æšä¸¾ä¼šæ¯”è¾ƒå¥½ï¼Œå› ä¸ºå¯ä»¥æå‰é€€å‡ºã€‚ è¿™ç§è§£æ³•çš„æ—¶é—´å¤æ‚åº¦æ¯”è¾ƒé«˜ï¼Œä¸º $O(N * M)$ï¼Œå…¶ä¸­ N ä¸º piles é•¿åº¦ï¼Œ M ä¸º Piles ä¸­æœ€å¤§çš„æ•°ï¼ˆä¹Ÿå°±æ˜¯è§£ç©ºé—´çš„æœ€å¤§å€¼ï¼‰ã€‚

è§‚å¯Ÿåˆ°éœ€è¦æ£€æµ‹çš„è§£ç©ºé—´æ˜¯ä¸ª**æœ‰åºåºåˆ—**ï¼Œåº”è¯¥æƒ³åˆ°å¯èƒ½èƒ½å¤Ÿä½¿ç”¨äºŒåˆ†æ¥è§£å†³ï¼Œè€Œä¸æ˜¯çº¿æ€§æšä¸¾ã€‚å¯ä»¥ä½¿ç”¨äºŒåˆ†è§£å†³çš„å…³é”®å’Œå‰é¢æˆ‘ä»¬ç®€åŒ–çš„äºŒåˆ†é—®é¢˜å¹¶æ— äºŒè‡´ï¼Œå…³é”®ç‚¹åœ¨äº**å¦‚æœé€Ÿåº¦ k åƒä¸å®Œæ‰€æœ‰é¦™è•‰ï¼Œé‚£ä¹ˆæ‰€æœ‰å°äºç­‰äº k çš„è§£éƒ½å¯ä»¥è¢«æ’é™¤ã€‚**

äºŒåˆ†è§£å†³çš„å…³é”®åœ¨äºï¼š

- æ˜ç¡®è§£ç©ºé—´ã€‚ å¯¹äºè¿™é“é¢˜æ¥è¯´ï¼Œ è§£ç©ºé—´å°±æ˜¯ [1,max(piles)]ã€‚
- å¦‚ä½•æ”¶ç¼©è§£ç©ºé—´ã€‚å…³é”®ç‚¹åœ¨äº**å¦‚æœé€Ÿåº¦ k åƒä¸å®Œæ‰€æœ‰é¦™è•‰ï¼Œé‚£ä¹ˆæ‰€æœ‰å°äºç­‰äº k çš„è§£éƒ½å¯ä»¥è¢«æ’é™¤ã€‚**

ç»¼ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æœ€å·¦äºŒåˆ†ï¼Œå³ä¸æ–­æ”¶ç¼©å³è¾¹ç•Œã€‚

![](./01.äºŒåˆ†.assets/9.jpg)

> é¦™è•‰å †çš„é¦™è•‰ä¸ªæ•°ä¸Šé™æ˜¯ 10^9ï¼Œ ç‚ç‚è¿™ä¹Ÿå¤ªèƒ½åƒäº†å§ï¼Ÿ

##### å…³é”®ç‚¹è§£æ

- äºŒåˆ†æŸ¥æ‰¾æ¨¡æ¿

##### ä»£ç 

ä»£ç æ”¯æŒï¼šPythonï¼ŒJavaScript

Python Code:

```py
class Solution:
    def solve(self, piles, k):
        def possible(mid):
            t = 0
            for pile in piles:
                t += (pile + mid - 1) // mid
            return t <= k

        l, r = 1, max(piles)

        while l <= r:
            mid = (l + r) // 2
            if possible(mid):
                r = mid - 1
            else:
                l = mid + 1
        return l

```

JavaScript Code:

```js
function canEatAllBananas(piles, H, mid) {
  let h = 0;
  for (let pile of piles) {
    h += Math.ceil(pile / mid);
  }

  return h <= H;
}
/**
 * @param {number[]} piles
 * @param {number} H
 * @return {number}
 */
var minEatingSpeed = function (piles, H) {
  let lo = 1,
    hi = Math.max(...piles);
  // [l, r) ï¼Œ å·¦é—­å³å¼€çš„å¥½å¤„æ˜¯å¦‚æœèƒ½æ‰¾åˆ°ï¼Œé‚£ä¹ˆè¿”å› l å’Œ r éƒ½æ˜¯ä¸€æ ·çš„ï¼Œå› ä¸ºæœ€ç»ˆ l ç­‰äº rã€‚
  while (lo <= hi) {
    let mid = lo + ((hi - lo) >> 1);
    if (canEatAllBananas(piles, H, mid)) {
      hi = mid - 1;
    } else {
      lo = mid + 1;
    }
  }

  return lo; //  ä¸èƒ½é€‰æ‹©hi
};
```

**å¤æ‚åº¦åˆ†æ**

- æ—¶é—´å¤æ‚åº¦ï¼š$O(max(N, N * logM))$ï¼Œå…¶ä¸­ N ä¸º piles é•¿åº¦ï¼Œ M ä¸º Piles ä¸­æœ€å¤§çš„æ•°ã€‚
- ç©ºé—´å¤æ‚åº¦ï¼š$O(1)$

#### æœ€å°ç¯åŠå¾„ï¼ˆå›°éš¾ï¼‰

##### é¢˜ç›®æè¿°

```
You are given a list of integers nums representing coordinates of houses on a 1-dimensional line. You have 3 street lights that you can put anywhere on the coordinate line and a light at coordinate x lights up houses in [x - r, x + r], inclusive. Return the smallest r required such that we can place the 3 lights and all the houses are lit up.

Constraints

n â‰¤ 100,000 where n is the length of nums
Example 1
Input
nums = [3, 4, 5, 6]
Output
0.5
Explanation
If we place the lamps on 3.5, 4.5 and 5.5 then with r = 0.5 we can light up all 4 houses.
```

##### å‰ç½®çŸ¥è¯†

- æ’åº
- äºŒåˆ†æ³•

##### äºŒåˆ†æ³•

##### æ€è·¯

æœ¬é¢˜å’ŒåŠ›æ‰£ [475. ä¾›æš–å™¨](https://leetcode-cn.com/problems/heaters/) ç±»ä¼¼ã€‚

è¿™é“é¢˜çš„æ„æ€æ˜¯ç»™ä½ ä¸€ä¸ªæ•°ç»„ numsï¼Œè®©ä½ åœ¨ [min(nums),max(nums)] èŒƒå›´å†…æ”¾ç½® 3 ä¸ªç¯ï¼Œæ¯ä¸ªç¯è¦†ç›–åŠå¾„éƒ½æ˜¯ rï¼Œè®©ä½ æ±‚æœ€å°çš„ rã€‚

ä¹‹æ‰€ä»¥ä¸é€‰æ‹©å°äº min(nums) çš„ä½ç½®å’Œå¤§äº max(nums) çš„ä½ç½®æ˜¯å› ä¸ºæ²¡æœ‰å¿…è¦ã€‚æ¯”å¦‚é€‰å–äº†å°äº min(nums) çš„ä½ç½® posï¼Œé‚£ä¹ˆé€‰å– pos **ä¸€å®šä¸æ¯”é€‰æ‹© min(nums) ä½ç½®ç»“æœæ›´ä¼˜**ã€‚

è¿™é“é¢˜çš„æ ¸å¿ƒç‚¹è¿˜æ˜¯ä¸€æ ·çš„æ€ç»´æ¨¡å‹ï¼Œå³ï¼š

- ç¡®å®šè§£ç©ºé—´ã€‚è¿™é‡Œçš„è§£ç©ºé—´å…¶å®å°±æ˜¯ rã€‚ä¸éš¾çœ‹å‡º r çš„ä¸‹ç•Œæ˜¯ 0ï¼Œ ä¸Šç•Œæ˜¯ max(nums) - min(nums)ã€‚

> æ²¡å¿…è¦ååˆ†ç²¾å‡†ï¼Œåªè¦ä¸é”™è¿‡æ­£ç¡®è§£å³å¯ï¼Œè¿™ä¸ªæˆ‘ä»¬åœ¨å‰é¢è®²è¿‡ï¼Œè¿™é‡Œå†æ¬¡å¼ºè°ƒä¸€ä¸‹ã€‚

- å¯¹äºä¸Šä¸‹ç•Œä¹‹é—´çš„æ‰€æœ‰å¯èƒ½ x è¿›è¡Œæšä¸¾ï¼ˆä¸å¦¨ä»å°åˆ°å¤§æšä¸¾ï¼‰ï¼Œæ£€æŸ¥åŠå¾„ä¸º x æ˜¯å¦å¯ä»¥è¦†ç›–æ‰€æœ‰ï¼Œè¿”å›ç¬¬ä¸€ä¸ªå¯ä»¥è¦†ç›–æ‰€æœ‰çš„ x å³å¯ã€‚

æ³¨æ„åˆ°æˆ‘ä»¬æ˜¯åœ¨ä¸€ä¸ªæœ‰åºåºåˆ—è¿›è¡Œæšä¸¾ï¼Œå› æ­¤ä½¿ç”¨äºŒåˆ†å°±åº”è¯¥æƒ³åˆ°ã€‚å¯ä½¿ç”¨äºŒåˆ†çš„æ ¸å¿ƒç‚¹åœ¨äºï¼šå¦‚æœ x ä¸è¡Œï¼Œé‚£ä¹ˆå°äº x çš„æ‰€æœ‰åŠå¾„éƒ½å¿…ç„¶ä¸è¡Œã€‚

æ¥ä¸‹æ¥çš„é—®é¢˜å°±æ˜¯ç»™å®šä¸€ä¸ªåŠå¾„ xï¼Œåˆ¤æ–­å…¶æ˜¯å¦å¯è¦†ç›–æ‰€æœ‰çš„æˆ¿å­ã€‚

**åˆ¤æ–­å…¶æ˜¯å¦å¯è¦†ç›–**å°±æ˜¯æ‰€è°“çš„èƒ½åŠ›æ£€æµ‹ï¼Œæˆ‘å®šä¹‰çš„å‡½æ•° possible å°±æ˜¯èƒ½åŠ›æ£€æµ‹ã€‚

é¦–å…ˆ**å¯¹ nums è¿›è¡Œæ’åº**ï¼Œè¿™åœ¨åé¢ä¼šç”¨åˆ°ã€‚ ç„¶åä»å·¦å¼€å§‹æ¨¡æ‹Ÿæ”¾ç½®ç¯ã€‚å…ˆåœ¨ nums[0] + r å¤„æ”¾ç½®ä¸€ä¸ªç¯ï¼Œå…¶å¯ä»¥è¦†ç›– [0, 2 * r]ã€‚ç”±äº nums å·²ç»æ’å¥½åºäº†ï¼Œé‚£ä¹ˆè¿™ä¸ªç­‰å¯ä»¥è¦†ç›–åˆ°çš„æˆ¿é—´å…¶å®å°±æ˜¯ nums ä¸­åæ ‡å°äºç­‰äº 2 \* r æ‰€æœ‰æˆ¿é—´ï¼Œä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾å³å¯ã€‚å¯¹äº nums å³ä¾§çš„æ‰€æœ‰çš„æˆ¿é—´æˆ‘ä»¬éœ€è¦ç»§ç»­æ”¾ç½®ç¯ï¼Œé‡‡ç”¨åŒæ ·çš„æ–¹å¼å³å¯ã€‚

èƒ½åŠ›æ£€æµ‹æ ¸å¿ƒä»£ç ï¼š

```py
def possible(diameter):
    start = nums[0]
    end = start + diameter
    for i in range(LIGHTS):
        idx = bisect_right(nums, end)
        if idx >= N:
            return True
        start = nums[idx]
        end = start + diameter
    return False
```

ç”±äºæˆ‘ä»¬æƒ³è¦æ‰¾åˆ°æ»¡è¶³æ¡ä»¶çš„æœ€å°å€¼ï¼Œå› æ­¤å¯ç›´æ¥å¥—ç”¨**æœ€å·¦äºŒåˆ†æ¨¡æ¿**ã€‚

##### ä»£ç 

ä»£ç æ”¯æŒï¼šPython3

Python3 Code:

```py
class Solution:
    def solve(self, nums):
        nums.sort()
        N = len(nums)
        if N <= 3:
            return 0
        LIGHTS = 3
        # è¿™é‡Œä½¿ç”¨çš„æ˜¯ç›´å¾„ï¼Œå› æ­¤æœ€ç»ˆè¿”å›éœ€è¦é™¤ä»¥ 2
        def possible(diameter):
            start = nums[0]
            end = start + diameter
            for i in range(LIGHTS):
                idx = bisect_right(nums, end)
                if idx >= N:
                    return True
                start = nums[idx]
                end = start + diameter
            return False

        l, r = 0, nums[-1] - nums[0]
        while l <= r:
            mid = (l + r) // 2
            if possible(mid):
                r = mid - 1
            else:
                l = mid + 1
        return l / 2
```

**å¤æ‚åº¦åˆ†æ**

ä»¤ n ä¸ºæ•°ç»„é•¿åº¦ã€‚

- æ—¶é—´å¤æ‚åº¦ï¼šç”±äºè¿›è¡Œäº†æ’åºï¼Œ å› æ­¤æ—¶é—´å¤æ‚åº¦å¤§çº¦æ˜¯ $O(nlogn)$
- ç©ºé—´å¤æ‚åº¦ï¼šå–å†³äºæ’åºçš„ç©ºé—´æ¶ˆè€—

#### 778. æ°´ä½ä¸Šå‡çš„æ³³æ± ä¸­æ¸¸æ³³ï¼ˆå›°éš¾ï¼‰

##### é¢˜ç›®åœ°å€

https://leetcode-cn.com/problems/swim-in-rising-water

##### é¢˜ç›®æè¿°

```
åœ¨ä¸€ä¸ª N x N çš„åæ ‡æ–¹æ ¼ Â grid ä¸­ï¼Œæ¯ä¸€ä¸ªæ–¹æ ¼çš„å€¼ grid[i][j] è¡¨ç¤ºåœ¨ä½ç½® (i,j) çš„å¹³å°é«˜åº¦ã€‚

ç°åœ¨å¼€å§‹ä¸‹é›¨äº†ã€‚å½“æ—¶é—´ä¸º Â tÂ  æ—¶ï¼Œæ­¤æ—¶é›¨æ°´å¯¼è‡´æ°´æ± ä¸­ä»»æ„ä½ç½®çš„æ°´ä½ä¸º Â tÂ ã€‚ä½ å¯ä»¥ä»ä¸€ä¸ªå¹³å°æ¸¸å‘å››å‘¨ç›¸é‚»çš„ä»»æ„ä¸€ä¸ªå¹³å°ï¼Œä½†æ˜¯å‰ææ˜¯æ­¤æ—¶æ°´ä½å¿…é¡»åŒæ—¶æ·¹æ²¡è¿™ä¸¤ä¸ªå¹³å°ã€‚å‡å®šä½ å¯ä»¥ç¬é—´ç§»åŠ¨æ— é™è·ç¦»ï¼Œä¹Ÿå°±æ˜¯é»˜è®¤åœ¨æ–¹æ ¼å†…éƒ¨æ¸¸åŠ¨æ˜¯ä¸è€—æ—¶çš„ã€‚å½“ç„¶ï¼Œåœ¨ä½ æ¸¸æ³³çš„æ—¶å€™ä½ å¿…é¡»å¾…åœ¨åæ ‡æ–¹æ ¼é‡Œé¢ã€‚

ä½ ä»åæ ‡æ–¹æ ¼çš„å·¦ä¸Šå¹³å° (0ï¼Œ0) å‡ºå‘ã€‚æœ€å°‘è€—æ—¶å¤šä¹…ä½ æ‰èƒ½åˆ°è¾¾åæ ‡æ–¹æ ¼çš„å³ä¸‹å¹³å° Â (N-1, N-1)ï¼Ÿ

ç¤ºä¾‹ 1:

è¾“å…¥: [[0,2],[1,3]]
è¾“å‡º: 3
è§£é‡Š:
æ—¶é—´ä¸º 0 æ—¶ï¼Œä½ ä½äºåæ ‡æ–¹æ ¼çš„ä½ç½®ä¸º (0, 0)ã€‚
æ­¤æ—¶ä½ ä¸èƒ½æ¸¸å‘ä»»æ„æ–¹å‘ï¼Œå› ä¸ºå››ä¸ªç›¸é‚»æ–¹å‘å¹³å°çš„é«˜åº¦éƒ½å¤§äºå½“å‰æ—¶é—´ä¸º 0 æ—¶çš„æ°´ä½ã€‚

ç­‰æ—¶é—´åˆ°è¾¾ 3 æ—¶ï¼Œä½ æ‰å¯ä»¥æ¸¸å‘å¹³å° (1, 1). å› ä¸ºæ­¤æ—¶çš„æ°´ä½æ˜¯ 3ï¼Œåæ ‡æ–¹æ ¼ä¸­çš„å¹³å°æ²¡æœ‰æ¯”æ°´ä½ 3 æ›´é«˜çš„ï¼Œæ‰€ä»¥ä½ å¯ä»¥æ¸¸å‘åæ ‡æ–¹æ ¼ä¸­çš„ä»»æ„ä½ç½®
ç¤ºä¾‹ 2:

è¾“å…¥: [[0,1,2,3,4],[24,23,22,21,5],[12,13,14,15,16],[11,17,18,19,20],[10,9,8,7,6]]
è¾“å‡º: 16
è§£é‡Š:
0 1 2 3 4
24 23 22 21 5
12 13 14 15 16
11 17 18 19 20
10 9 8 7 6

æœ€ç»ˆçš„è·¯çº¿ç”¨åŠ ç²—è¿›è¡Œäº†æ ‡è®°ã€‚
æˆ‘ä»¬å¿…é¡»ç­‰åˆ°æ—¶é—´ä¸º 16ï¼Œæ­¤æ—¶æ‰èƒ½ä¿è¯å¹³å° (0, 0) å’Œ (4, 4) æ˜¯è¿é€šçš„

æç¤º:

2 <= N <= 50.
grid[i][j] ä½äºåŒºé—´ [0, ..., N*N - 1] å†…ã€‚
```

##### å‰ç½®çŸ¥è¯†

- [DFS](https://github.com/azl397985856/leetcode/blob/master/thinkings/DFS.md)
- [äºŒåˆ†](https://github.com/azl397985856/leetcode/blob/master/91/binary-search.md)

##### æ€è·¯

é¦–å…ˆæ˜ç¡®ä¸€ä¸‹è§£ç©ºé—´ã€‚ä¸éš¾å¾—å‡ºï¼Œè§£ç©ºé—´æ˜¯[0, max(grid)]ï¼Œå…¶ä¸­ max(grid) è¡¨ç¤º grid ä¸­çš„æœ€å¤§å€¼ã€‚

å› æ­¤ä¸€ä¸ªç®€å•çš„æ€è·¯æ˜¯ä¸€ä¸ªä¸ªè¯•ã€‚

- è¯•è¯• a å¯ä»¥ä¸
- è¯•è¯• a+1 å¯ä»¥ä¸
- ã€‚ã€‚ã€‚

**è¯•è¯• x æ˜¯å¦å¯è¡Œ**å°±æ˜¯èƒ½åŠ›æ£€æµ‹ã€‚

å®é™…ä¸Šï¼Œå¦‚æœ x ä¸å¯ä»¥ï¼Œé‚£ä¹ˆå°äº x çš„æ‰€æœ‰å€¼éƒ½æ˜¯ä¸å¯ä»¥çš„ï¼Œè¿™æ­£æ˜¯æœ¬é¢˜çš„çªç ´å£ã€‚åŸºäºæ­¤ï¼Œæˆ‘ä»¬åŒæ ·å¯ä½¿ç”¨è®²ä¹‰ä¸­çš„**æœ€å·¦äºŒåˆ†**æ¨¡æ¿è§£å†³ã€‚

ä¼ªä»£ç :

```py
def test(x):
    pass
while l <= r:
    mid = (l + r) // 2
    if test(mid, 0, 0):
        r = mid - 1
    else:
        l = mid + 1
return l

```

è¿™ä¸ªæ¨¡æ¿ä¼šåœ¨å¾ˆå¤šäºŒåˆ†ä¸­ä½¿ç”¨ã€‚æ¯”å¦‚å…¸å‹çš„è®¡æ•°å‹äºŒåˆ†ï¼Œå…¸å‹çš„å°±æ˜¯è®¡ç®—å°äºç­‰äº x çš„æœ‰å¤šå°‘ï¼Œç„¶åæ ¹æ®ç­”æ¡ˆæ›´æ–°è§£ç©ºé—´ã€‚

æ˜ç¡®äº†è¿™ç‚¹ï¼Œå‰©ä¸‹è¦åšçš„å°±æ˜¯å®Œæˆèƒ½åŠ›æ£€æµ‹éƒ¨åˆ† ï¼ˆtest å‡½æ•°ï¼‰ äº†ã€‚å…¶å®è¿™ä¸ªå°±æ˜¯ä¸€ä¸ªæ™®é€šçš„äºŒç»´ç½‘æ ¼ dfsï¼Œæˆ‘ä»¬ä» (0,0) å¼€å§‹åœ¨ä¸€ä¸ªäºŒç»´ç½‘æ ¼ä¸­æœç´¢ï¼Œç›´åˆ°æ— æ³•ç»§ç»­æˆ–è¾¾åˆ° (N-1,N-1)ï¼Œå¦‚æœå¯ä»¥è¾¾åˆ° (N-1,N-1)ï¼Œæˆ‘ä»¬è¿”å› trueï¼Œå¦åˆ™è¿”å› False å³å¯ã€‚å¯¹äºŒç»´ç½‘æ ¼çš„ DFS ä¸ç†Ÿæ‚‰çš„åŒå­¦å¯ä»¥çœ‹ä¸‹æˆ‘ä¹‹å‰å†™çš„[å°å²›ä¸“é¢˜](https://github.com/azl397985856/leetcode/blob/master/thinkings/island.md)

##### ä»£ç 

```py
class Solution:
    def swimInWater(self, grid: List[List[int]]) -> int:
        l, r = 0, max([max(vec) for vec in grid])
        seen = set()

        def test(mid, x, y):
            if x > len(grid) - 1 or x < 0 or y > len(grid[0]) - 1 or y < 0:
                return False
            if grid[x][y] > mid:
                return False
            if (x, y) == (len(grid) - 1, len(grid[0]) - 1):
                return True
            if (x, y) in seen:
                return False
            seen.add((x, y))
            ans = test(mid, x + 1, y) or test(mid, x - 1,
                                              y) or test(mid, x, y + 1) or test(mid, x, y - 1)
            return ans
        while l <= r:
            mid = (l + r) // 2
            if test(mid, 0, 0):
                r = mid - 1
            else:
                l = mid + 1
            seen = set()
        return l

```

**å¤æ‚åº¦åˆ†æ**

- æ—¶é—´å¤æ‚åº¦ï¼š$O(NlogM)$ï¼Œå…¶ä¸­ M ä¸º grid ä¸­çš„æœ€å¤§å€¼ï¼Œ N ä¸º grid çš„æ€»å¤§å°ã€‚
- ç©ºé—´å¤æ‚åº¦ï¼š$O(N)$ï¼Œå…¶ä¸­ N ä¸º grid çš„æ€»å¤§å°ã€‚

### è®¡æ•°äºŒåˆ†

è®¡æ•°äºŒåˆ†å’Œä¸Šé¢çš„æ€è·¯å·²ç»ä»£ç éƒ½åŸºæœ¬ä¸€è‡´ã€‚ ç›´æ¥çœ‹ä»£ç ä¼šæ¸…æ¥šä¸€ç‚¹ï¼š

```py
def count_bs(nums, k):
  def count_not_greater(mid):
    pass
  l, r = 0, len(A) - 1
  while l <= r:
      mid = (l + r) // 2
      # åªæœ‰è¿™é‡Œå’Œæœ€å·¦äºŒåˆ†ä¸ä¸€æ ·
      if count_not_greater(mid) > k: r = mid - 1
      else: l = mid + 1
  return l
```

å¯ä»¥çœ‹å‡ºåªæ˜¯å°† `possible` å˜æˆäº† `count_not_greater`ï¼Œè¿”å›å€¼å˜æˆäº†æ•°å­—è€Œå·²ã€‚

å®é™…ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥å°†ä¸Šé¢çš„ä»£ç ç¨å¾®æ”¹é€ ä¸€ä¸‹ï¼Œä½¿å¾—ä¸¤è€…æ›´åƒï¼š

```py
def count_bs(nums, k):
  def possible(mid, k):
    # xxx
    return cnt > k
  l, r = 0, len(A) - 1
  while l <= r:
      mid = (l + r) // 2
      if possible(mid, k): r = mid - 1
      else: l = mid + 1
  return l
```

æ˜¯ä¸æ˜¯åŸºæœ¬ä¸€è‡´äº†ï¼Ÿ

ç”±äºå’Œä¸Šé¢åŸºæœ¬ä¸€è‡´ï¼Œ å› æ­¤è¿™é‡Œç›´æ¥æ¨èä¸€ä¸ªé¢˜ç›®ï¼Œå¤§å®¶ç”¨æˆ‘çš„æ€è·¯ç»ƒä¹ ä¸€ä¸‹ï¼Œçœ‹çœ‹æˆ‘çš„æŠ€å·§çµä¸çµã€‚

- [ç¬¬ k å°çš„è·ç¦»å¯¹](https://binarysearch.com/problems/Kth-Pair-Distance)

### å‰ç¼€å’ŒäºŒåˆ†

å‰é¢è¯´äº†ï¼šå¦‚æœæ•°ç»„å…¨æ˜¯æ­£çš„ï¼Œé‚£ä¹ˆå…¶å‰ç¼€å’Œå°±æ˜¯ä¸€ä¸ªä¸¥æ ¼é€’å¢çš„æ•°ç»„ï¼ŒåŸºäºè¿™ä¸ªç‰¹æ€§ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å…¶ä¹‹ä¸ŠåšäºŒåˆ†ã€‚ç±»ä¼¼çš„æœ‰å•è°ƒæ ˆ/é˜Ÿåˆ—ã€‚è¿™ç§é¢˜ç›®ç±»å‹å¾ˆå¤šï¼Œä¸ºäº†èŠ‚çœç¯‡å¹…å°±ä¸ä¸¾ä¾‹è¯´æ˜äº†ã€‚æå‡ºå‰ç¼€å’ŒäºŒåˆ†çš„æ ¸å¿ƒçš„ç‚¹åœ¨äºè®©å¤§å®¶ä¿æŒå¯¹**æœ‰åºåºåˆ—**çš„æ•æ„Ÿåº¦ã€‚

æ¯”å¦‚é¢˜ç›® [LCP 08. å‰§æƒ…è§¦å‘æ—¶é—´](https://leetcode-cn.com/problems/ju-qing-hong-fa-shi-jian/)ï¼Œä¸éš¾å‘ç°æœ´ç´ çš„æš´åŠ›åšæ³•æ—¶é—´å¤æ‚åº¦æ˜¯ $O(m*n)$ï¼Œ å…¶ä¸­ m å’Œ n åˆ†åˆ«ä¸º increase å’Œ requirements çš„é•¿åº¦ã€‚è¿›ä¸€æ­¥æˆ‘ä»¬å‘ç°éšç€æ¸¸æˆè¿›è¡Œï¼Œä¸‰ç§å±æ€§é€’å¢ï¼Œä¹Ÿå°±æ˜¯è¯´å…¶æ˜¯ä¸€ä¸ª**æœ‰åºåºåˆ—**ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥åŸºäºæ­¤è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾ï¼Œåˆ†åˆ«å¯¹ Cï¼ŒR å’Œ H è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾ï¼Œä¸‰ä¸ªä¸­çš„ç“¶é¢ˆå°±æ˜¯ç­”æ¡ˆï¼Œå¤§å®¶ä¸å¦¨è‡ªå·±è¯•è¯•ï¼Œä½“ä¼šä¸€ä¸‹**æœ‰åºåºåˆ—**çš„å¦™å¤„ã€‚

å†æ¯”å¦‚ [2389. å’Œæœ‰é™çš„æœ€é•¿å­åºåˆ—](https://leetcode.cn/problems/longest-subsequence-with-limited-sum/) ç”±äºæ•°ç»„ä¸­æ¯ä¸€ä¸ªæ•°éƒ½æ˜¯æ­£æ•°ï¼Œå› æ­¤å‰ç¼€å’Œæ˜¯é€’å¢çš„ï¼Œ è¿™æ ·å‰ç¼€å’Œçš„æœ€åä¸€ä¸ªå°äºç­‰äº x çš„æ•°å°±æ˜¯æ»¡è¶³é¢˜ç›®æ¡ä»¶çš„å­åºåˆ—çš„æœ€å¤§é•¿åº¦ã€‚

è€Œå³ä½¿å‰ç¼€å’Œä¸æ˜¯æœ‰åºçš„ï¼Œ æˆ‘ä»¬ä¹Ÿå¯ä»¥æ‰‹åŠ¨ç»´æŠ¤æˆæœ‰åºï¼Œ ç„¶ååšäºŒåˆ†ã€‚ æ¯”å¦‚ï¼šç»™ä½ ä¸€ä¸ªæ•°ç»„ numsï¼Œ è®©ä½ æ±‚ nums æœ‰å¤šå°‘ä¸ªå­æ•°ç»„çš„å’Œå¤§äº 0ã€‚ æˆ‘ä»¬å¯ä»¥ç”¨å‰ç¼€å’Œé¢„å¤„ç†ï¼Œç„¶åå‰ç¼€å’Œè®¡ç®—ä»»æ„å­æ•°ç»„çš„å’Œã€‚è€Œè¿™é‡Œæˆ‘ä»¬éœ€è¦æ‰‹åŠ¨ç»´æŠ¤â€œæœ‰åºçš„â€å‰ç¼€å’ŒäºŒåˆ†ã€‚æ¯”å¦‚å½“å‰ç´¯è®¡å’Œä¸º tï¼Œç´¢å¼•æ˜¯ iï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„ç›®æ ‡æ˜¯æ‰¾åˆ°ç¬¬ä¸€ä¸ªä¸º t çš„ä½ç½® xï¼Œé‚£ä¹ˆå·¦ç«¯ç‚¹ä¸º [0,x) å³ç«¯ç‚¹æ˜¯ i çš„å­æ•°ç»„éƒ½æ˜¯æ»¡è¶³æ¡ä»¶çš„ï¼Œç´¯åŠ å³å¯ã€‚

é¢˜ç›®æ¨èï¼š

- [2488. ç»Ÿè®¡ä¸­ä½æ•°ä¸º K çš„å­æ•°ç»„](https://leetcode.cn/problems/count-subarrays-with-median-k/)

2488 å‚è€ƒä»£ç ï¼š

```py
from sortedcontainers import SortedList
class Solution:
    def countSubarrays(self, nums: List[int], k: int) -> int:
        def f(mid: int) -> int:
            A = [1 if num >= mid else -1 for num in nums]
            ans, t, d = 0, 0, SortedList([0])
            for num in A:
                t += num
                ans += d.bisect_left(t)
                d.add(t)
            return ans
        return f(k) - f(k + 1)
```

### æ’å…¥æ’åºäºŒåˆ†

é™¤äº†ä¸Šé¢çš„å‰ç¼€å’Œä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è‡ªè¡Œç»´æŠ¤æœ‰åºåºåˆ—ã€‚ä¸€èˆ¬æœ‰ä¸‰ç§æ–¹å¼ï¼š

- ç›´æ¥å¯¹åºåˆ—æ’åºã€‚

ä»£ç è¡¨ç¤ºï¼š

```py
nums.sort()
bisect.bisect_left(nums, x) # æœ€å·¦äºŒåˆ†
bisect.bisect_right(nums, x) # æœ€å³äºŒåˆ†
```

- éå†è¿‡ç¨‹ç»´æŠ¤ä¸€ä¸ªæ–°çš„æœ‰åºåºåˆ—ï¼Œæœ‰åºåºåˆ—çš„å†…å®¹ä¸º**å·²ç»éå†è¿‡çš„å€¼çš„é›†åˆ**ã€‚

æ¯”å¦‚æ— åºæ•°ç»„ [3,2,10,5]ï¼Œéå†åˆ°ç´¢å¼•ä¸º 2 çš„é¡¹ï¼ˆä¹Ÿå°±æ˜¯å€¼ä¸º 10 çš„é¡¹ï¼‰æ—¶ï¼Œæˆ‘ä»¬æ„å»ºçš„æœ‰åºåºåˆ—ä¸º [2,3,10]ã€‚

> æ³¨æ„æˆ‘æè¿°çš„æ˜¯æœ‰åºåºåˆ—ï¼Œå¹¶ä¸æ˜¯æŒ‡æ•°ç»„ï¼Œé“¾è¡¨ç­‰å…·ä½“çš„æ•°æ®ç»“æ„ã€‚è€Œå®é™…ä¸Šï¼Œè¿™ä¸ªæœ‰åºåºåˆ—å¾ˆå¤šæƒ…å†µä¸‹æ˜¯å¹³è¡¡äºŒå‰æ ‘ã€‚åé¢é¢˜ç›®ä¼šä½“ç°è¿™ä¸€ç‚¹ã€‚

ä»£ç è¡¨ç¤ºï¼š

```py
d = SortedList()
for a in A:
    d.add(a) # å°† a æ·»åŠ åˆ° dï¼Œå¹¶ç»´æŒ d ä¸­æ•°æ®æœ‰åº
```

ä¸Šé¢ä»£ç çš„ d å°±æ˜¯æœ‰åºåºåˆ—ã€‚

![â€æ’å…¥æ’åºâ€œå›¾ç¤º](./01.äºŒåˆ†.assets/10.jpg)

ç†è®ºçŸ¥è¯†åˆ°æ­¤ä¸ºæ­¢ï¼Œæ¥ä¸‹æ¥é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥è¯´æ˜ã€‚

- å°†æ•°ç»„ç´¢å¼•æ”¾åˆ°ä¸€ä¸ªæ•°ç»„ arr ä¸­ï¼Œå¹¶ç»´æŒ arr æœ‰åºã€‚è¿™é‡Œç»´æŒ arr æœ‰åºå°±ç®€å•å¤šäº†ï¼Œæˆ‘ä»¬åªéœ€ä»å·¦åˆ°å³éå†åŸæ•°ç»„å³å¯ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹ arr è¿›è¡ŒäºŒåˆ†ã€‚æ¨èé¢˜ç›®ï¼š[åŒºé—´å†…æŸ¥è¯¢æ•°å­—çš„é¢‘ç‡](https://leetcode-cn.com/problems/range-frequency-queries/)

#### 327. åŒºé—´å’Œçš„ä¸ªæ•°(å›°éš¾)

##### é¢˜ç›®åœ°å€

https://leetcode-cn.com/problems/count-of-range-sum

##### é¢˜ç›®æè¿°

```
ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„Â nums ã€‚åŒºé—´å’ŒÂ S(i, j)Â è¡¨ç¤ºåœ¨Â numsÂ ä¸­ï¼Œä½ç½®ä»Â iÂ åˆ°Â jÂ çš„å…ƒç´ ä¹‹å’Œï¼ŒåŒ…å«Â iÂ å’ŒÂ jÂ (i â‰¤ j)ã€‚

è¯·ä½ ä»¥ä¸‹æ ‡ i ï¼ˆ0 <= i <= nums.length ï¼‰ä¸ºèµ·ç‚¹ï¼Œå…ƒç´ ä¸ªæ•°é€æ¬¡é€’å¢ï¼Œè®¡ç®—å­æ•°ç»„å†…çš„å…ƒç´ å’Œã€‚

å½“å…ƒç´ å’Œè½åœ¨èŒƒå›´ [lower, upper] ï¼ˆåŒ…å«Â lowerÂ å’ŒÂ upperï¼‰ä¹‹å†…æ—¶ï¼Œè®°å½•å­æ•°ç»„å½“å‰æœ€æœ«å…ƒç´ ä¸‹æ ‡ j ï¼Œè®°ä½œ æœ‰æ•ˆ åŒºé—´å’ŒÂ S(i, j) ã€‚

æ±‚æ•°ç»„ä¸­ï¼Œå€¼ä½äºèŒƒå›´ [lower, upper] ï¼ˆåŒ…å«Â lowerÂ å’ŒÂ upperï¼‰ä¹‹å†…çš„ æœ‰æ•ˆ åŒºé—´å’Œçš„ä¸ªæ•°ã€‚

Â 

æ³¨æ„ï¼š
æœ€ç›´è§‚çš„ç®—æ³•å¤æ‚åº¦æ˜¯Â O(n2) ï¼Œè¯·åœ¨æ­¤åŸºç¡€ä¸Šä¼˜åŒ–ä½ çš„ç®—æ³•ã€‚

Â 

ç¤ºä¾‹ï¼š

è¾“å…¥ï¼šnums = [-2,5,-1], lower = -2, upper = 2,
è¾“å‡ºï¼š3
è§£é‡Šï¼š
ä¸‹æ ‡ i = 0 æ—¶ï¼Œå­æ•°ç»„ [-2]ã€[-2,5]ã€[-2,5,-1]ï¼Œå¯¹åº”å…ƒç´ å’Œåˆ†åˆ«ä¸º -2ã€3ã€2 ï¼›å…¶ä¸­ -2 å’Œ 2 è½åœ¨èŒƒå›´ [lower = -2, upper = 2] ä¹‹é—´ï¼Œå› æ­¤è®°å½•æœ‰æ•ˆåŒºé—´å’Œ S(0,0)ï¼ŒS(0,2) ã€‚
ä¸‹æ ‡ i = 1 æ—¶ï¼Œå­æ•°ç»„ [5]ã€[5,-1] ï¼Œå…ƒç´ å’Œ 5ã€4 ï¼›æ²¡æœ‰æ»¡è¶³é¢˜æ„çš„æœ‰æ•ˆåŒºé—´å’Œã€‚
ä¸‹æ ‡ i = 2 æ—¶ï¼Œå­æ•°ç»„ [-1] ï¼Œå…ƒç´ å’Œ -1 ï¼›è®°å½•æœ‰æ•ˆåŒºé—´å’Œ S(2,2) ã€‚
æ•…ï¼Œå…±æœ‰ 3 ä¸ªæœ‰æ•ˆåŒºé—´å’Œã€‚
Â 

æç¤ºï¼š

0 <= nums.length <= 10^4

```

##### æ€è·¯

é¢˜ç›®å¾ˆå¥½ç†è§£ã€‚

ç”±å‰ç¼€å’Œçš„æ€§è´¨çŸ¥é“ï¼šåŒºé—´ i åˆ° jï¼ˆåŒ…å«ï¼‰çš„å’Œ sum(i,j) = pre[j] - pre[i-1]ï¼Œå…¶ä¸­ pre[i] ä¸ºæ•°ç»„å‰ i é¡¹çš„å’Œ 0 <= i < nã€‚

ä½†æ˜¯é¢˜ç›®ä¸­çš„æ•°å­—å¯èƒ½æ˜¯è´Ÿæ•°ï¼Œå‰ç¼€å’Œä¸ä¸€å®šæ˜¯å•è°ƒçš„å•Šï¼Ÿè¿™å¦‚ä½•æ˜¯å¥½å‘¢ï¼Ÿç­”æ¡ˆæ˜¯æ‰‹åŠ¨ç»´æŠ¤å‰ç¼€å’Œçš„æœ‰åºæ€§ã€‚

æ¯”å¦‚ [-2,5,-1] çš„å‰ç¼€å’Œ ä¸º [-2,3,2]ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥å°†æ±‚æ‰‹åŠ¨ç»´æŠ¤ä¸º [-2,2,3]ï¼Œè¿™æ ·å°±æœ‰åºäº†ã€‚ä½†æ˜¯è¿™ä¸§å¤±äº†ç´¢å¼•ä¿¡æ¯ï¼Œå› æ­¤è¿™ä¸ªæŠ€å·§ä»…é€‚ç”¨äº**æ— éœ€è€ƒè™‘ç´¢å¼•ï¼Œä¹Ÿå°±æ˜¯ä¸éœ€è¦æ±‚å…·ä½“çš„å­åºåˆ—ï¼Œåªéœ€è¦çŸ¥é“æœ‰è¿™ä¹ˆä¸€ä¸ªå­åºåˆ—å°±è¡Œäº†ï¼Œå…·ä½“æ˜¯å“ªä¸ªï¼Œæˆ‘ä»¬ä¸å…³å¿ƒ**ã€‚

æ¯”å¦‚å½“å‰çš„å‰ç¼€å’Œæ˜¯ curï¼Œé‚£ä¹ˆå‰ç¼€å’Œå°äºç­‰äº cur - lower æœ‰å¤šå°‘ä¸ªï¼Œå°±è¯´æ˜ä»¥å½“å‰ç»“å°¾çš„åŒºé—´å’Œå¤§äºç­‰äº lower çš„æœ‰å¤šå°‘ä¸ªã€‚ç±»ä¼¼åœ°ï¼Œå‰ç¼€å’Œå°äºç­‰äº cur - upper æœ‰å¤šå°‘ä¸ªï¼Œå°±è¯´æ˜ä»¥å½“å‰ç»“å°¾çš„åŒºé—´å’Œå¤§äºç­‰äº upper çš„æœ‰å¤šå°‘ä¸ªã€‚

åŸºäºè¿™ä¸ªæƒ³æ³•ï¼Œæˆ‘ä»¬å¯ä½¿ç”¨äºŒåˆ†åœ¨ $logn$ çš„æ—¶é—´å¿«é€Ÿæ±‚å‡ºè¿™ä¸¤ä¸ªæ•°å­—ï¼Œä½¿ç”¨å¹³è¡¡äºŒå‰æ ‘ä»£æ›¿æ•°ç»„å¯ä½¿å¾—æ’å…¥çš„æ—¶é—´å¤æ‚åº¦é™ä½åˆ° $O(logn)$ã€‚Python å¯ä½¿ç”¨ SortedList æ¥å®ç°ï¼Œ Java å¯ç”¨ TreeMap ä»£æ›¿ã€‚

##### ä»£ç 

```py
from sortedcontainers import SortedList
class Solution:
    def countRangeSum(self, A: List[int], lower: int, upper: int) -> int:
        ans, pre, cur = 0, SortedList([0]), 0
        for a in A:
            cur += a
            ans += pre.bisect_right(cur - lower) - pre.bisect_left(cur - upper)
            pre.add(cur)
        return ans

```

**å¤æ‚åº¦åˆ†æ**

ä»¤ n ä¸ºæ•°ç»„é•¿åº¦ã€‚

- æ—¶é—´å¤æ‚åº¦ï¼š$O(nlogn)$
- ç©ºé—´å¤æ‚åº¦ï¼š$O(nlogn)$

#### 493. ç¿»è½¬å¯¹ï¼ˆå›°éš¾ï¼‰

##### é¢˜ç›®åœ°å€

https://leetcode-cn.com/problems/reverse-pairs/

##### é¢˜ç›®æè¿°

```
ç»™å®šä¸€ä¸ªæ•°ç»„Â numsÂ ï¼Œå¦‚æœÂ i < jÂ ä¸”Â nums[i] > 2*nums[j]Â æˆ‘ä»¬å°±å°†Â (i, j)Â ç§°ä½œä¸€ä¸ªé‡è¦ç¿»è½¬å¯¹ã€‚

ä½ éœ€è¦è¿”å›ç»™å®šæ•°ç»„ä¸­çš„é‡è¦ç¿»è½¬å¯¹çš„æ•°é‡ã€‚

ç¤ºä¾‹ 1:

è¾“å…¥: [1,3,2,3,1]
è¾“å‡º: 2


ç¤ºä¾‹ 2:

è¾“å…¥: [2,4,3,5,1]
è¾“å‡º: 3


æ³¨æ„:

ç»™å®šæ•°ç»„çš„é•¿åº¦ä¸ä¼šè¶…è¿‡50000ã€‚
è¾“å…¥æ•°ç»„ä¸­çš„æ‰€æœ‰æ•°å­—éƒ½åœ¨32ä½æ•´æ•°çš„è¡¨ç¤ºèŒƒå›´å†…ã€‚
```

##### å‰ç½®çŸ¥è¯†

- äºŒåˆ†

##### å…¬å¸

- æš‚æ— 

##### æ€è·¯

æˆ‘ä»¬å¯ä»¥ä¸€è¾¹éå†ä¸€è¾¹ç»´æŠ¤ä¸€ä¸ªæœ‰åºåºåˆ— dï¼Œå…¶ä¸­ d ä¸º**å·²ç»éå†è¿‡çš„å€¼çš„é›†åˆ**ã€‚å¯¹äºæ¯ä¸€ä¸ªä½ç½® 0 <= i < nï¼Œæˆ‘ä»¬ç»Ÿè®¡ d ä¸­å¤§äº 2 \* A[i] çš„ä¸ªæ•°ï¼Œè¿™ä¸ªä¸ªæ•°å°±æ˜¯é¢˜ç›®è¦æ±‚çš„ç¿»è½¬å¯¹ã€‚è¿™é‡Œçš„å…³é”®åœ¨äº d ä¸­çš„å€¼æ˜¯æ¯”å½“å‰ç´¢å¼•å°çš„**å…¨éƒ¨**å€¼ã€‚

æˆ‘ä»¬å½“ç„¶å¯ä»¥çº¿æ€§éå† dï¼Œæ±‚å‡ºä¸ªæ•°ã€‚ä¸€ä¸ªæ›´å¥½çš„æ–¹æ³•æ˜¯åœ¨éå†çš„åŒæ—¶ç»´æŒ d æ˜¯**æœ‰åºçš„**ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ç”¨äºŒåˆ†äº†ã€‚å’Œä¸Šé¢é¢˜ç›®ä¸€æ ·ï¼Œä½¿ç”¨å¹³è¡¡äºŒå‰æ ‘ä»£æ›¿æ•°ç»„å¯ä½¿å¾—æ’å…¥çš„æ—¶é—´å¤æ‚åº¦é™ä½åˆ° $O(logn)$ã€‚

![å¹³è¡¡äºŒå‰æ ‘](./01.äºŒåˆ†.assets/11.jpg)

##### å…³é”®ç‚¹

- æ’å…¥æ’åºäºŒåˆ†

##### ä»£ç 

- è¯­è¨€æ”¯æŒï¼šPython3

Python3 Code:

```python
from sortedcontainers import SortedList
class Solution:
    def reversePairs(self, A: List[int]) -> int:
        d = SortedList()
        ans = 0
        for a in A:
            ans += len(d) - d.bisect_right(2*a)
            d.add(a)
        return ans

```

**å¤æ‚åº¦åˆ†æ**

ä»¤ n ä¸ºæ•°ç»„é•¿åº¦ã€‚

- æ—¶é—´å¤æ‚åº¦ï¼š$O(nlogn)$
- ç©ºé—´å¤æ‚åº¦ï¼š$O(n)$

### å°ç»“

å››ä¸ªåº”ç”¨è®²äº†ä¸¤ç§æ„é€ æœ‰åºåºåˆ—çš„æ–¹å¼ï¼Œåˆ†åˆ«æ˜¯å‰ç¼€å’Œï¼Œæ’å…¥æ’åºï¼Œæ’å…¥æ’åºçš„éƒ¨åˆ†å…¶å®ä¹Ÿå¯ä»¥çœ‹ä¸‹æˆ‘ä¹‹å‰å†™çš„[æœ€é•¿ä¸Šå‡å­åºåˆ—ç³»åˆ—](https://lucifer.ren/blog/2020/06/20/LIS/ "æœ€é•¿ä¸Šå‡å­åºåˆ—ç³»åˆ—")ï¼Œé‚£é‡Œé¢çš„è´ªå¿ƒè§£æ³•å°±æ˜¯**è‡ªå·±æ„é€ æœ‰åºåºåˆ—å†äºŒåˆ†**çš„ã€‚ å¦å¤–ç†è®ºä¸Šå•è°ƒæ ˆ/é˜Ÿåˆ—ä¹Ÿæ˜¯æœ‰åºçš„ï¼Œä¹Ÿå¯æ˜¯ç”¨æ¥åšäºŒåˆ†ï¼Œä½†æ˜¯ç›¸å…³é¢˜ç›®å¤ªå°‘äº†ï¼Œå› æ­¤å¤§å®¶åªè¦ä¿æŒå¯¹**æœ‰åºåºåˆ—**çš„æ•æ„Ÿåº¦å³å¯ã€‚è€Œå‰ç¼€å’Œè¿™ç§æœ‰åºåºåˆ—çš„äºŒåˆ†æ˜¯æ¯”è¾ƒå¤šçš„ï¼Œæ¯”å¦‚æœ€è¿‘çš„ä¸€æ¬¡å‘¨èµ›å°±ç”¨åˆ°äº† [5900. èœ¡çƒ›ä¹‹é—´çš„ç›˜å­](https://leetcode-cn.com/problems/plates-between-candles/)ã€‚è¿™é“é¢˜å°±å¯ä»¥å¯¹ç›˜å­è¿›è¡Œå‰ç¼€å’Œç»Ÿè®¡ï¼Œè€Œæ˜¯æ¯æ¬¡æŸ¥è¯¢éƒ½åœ¨å‰ç¼€å’Œä¸Šè¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾ï¼Œå”¯ä¸€éœ€è¦æ³¨æ„çš„æ˜¯ä¸€äº› corner case çš„å¤„ç†ã€‚

èƒ½åŠ›æ£€æµ‹äºŒåˆ†å¾ˆå¸¸è§ï¼Œä¸è¿‡å…¶ä»…ä»…æ˜¯å°†æ™®é€šäºŒåˆ†çš„ if éƒ¨åˆ†æ”¹é€ æˆäº†å‡½æ•°è€Œå·²ã€‚è€Œå¯¹äºè®¡æ•°äºŒåˆ†ï¼Œå…¶å®å°±æ˜¯èƒ½åŠ›æ£€æµ‹äºŒåˆ†çš„ç‰¹ä¾‹ï¼Œåªä¸è¿‡å…¶å¤ªå¸¸è§äº†ï¼Œå°±å°†å…¶å•ç‹¬æå–å‡ºæ¥äº†ã€‚

å¦å¤–ï¼Œæœ‰æ—¶å€™æœ‰åºåºåˆ—ä¹Ÿä¼šç»™ä½ ç¨å¾®å˜åŒ–ä¸€ç§å½¢å¼ã€‚æ¯”å¦‚äºŒå‰æœç´¢æ ‘ï¼Œå¤§å®¶éƒ½çŸ¥é“å¯ä»¥åœ¨ $logn$ çš„æ—¶é—´å®ŒæˆæŸ¥æ‰¾ï¼Œè¿™ä¸ªæŸ¥æ‰¾è¿‡ç¨‹æœ¬è´¨ä¹Ÿæ˜¯äºŒåˆ†ã€‚äºŒå‰æŸ¥æ‰¾æ ‘æœ‰**æœ‰åºåºåˆ—**ä¹ˆï¼Ÿæœ‰çš„ï¼äºŒå‰æŸ¥æ‰¾æ ‘çš„ä¸­åºéå†æ°å¥½å°±æ˜¯ä¸€ä¸ªæœ‰åºåºåˆ—ã€‚å› æ­¤å¦‚æœä¸€ä¸ªæ•°æ¯”å½“å‰èŠ‚ç‚¹å€¼å°ï¼Œä¸€å®šåœ¨å·¦å­æ ‘ï¼ˆä¹Ÿå°±æ˜¯æœ‰åºåºåˆ—çš„å·¦ä¾§ï¼‰ï¼Œå¦‚æœä¸€ä¸ªæ•°æ¯”å½“å‰èŠ‚ç‚¹å€¼å¤§ï¼Œä¸€å®šåœ¨å³å­æ ‘ï¼ˆä¹Ÿå°±æ˜¯æœ‰åºåºåˆ—çš„å³ä¾§ï¼‰ã€‚

## æ¯é¢˜

1. ç»™ä½ ä¸€ä¸ªé•¿åº¦ä¸º m çš„å€¼çš„èŒƒå›´æ˜¯ [1,n]çš„æœ‰åºåºåˆ—ã€‚æ±‚æ•°ç»„ä¸­ç¼ºå¤±çš„ç¬¬ä¸€ä¸ªæ•°æ˜¯å¤šå°‘ï¼Ÿ

æ¯”å¦‚ï¼š

- [2,3,4] ç¼ºå¤±çš„ç¬¬ä¸€ä¸ªæ•°æ˜¯ 1
- [1,2,3,5] ç¼ºå¤±çš„ç¬¬ä¸€ä¸ªæ•°æ˜¯ 4

æˆ‘ä»¬å¯ä»¥å°†é—®é¢˜è½¬åŒ–ä¸ºæ±‚**æœ€å³æ»¡è¶³ nums[i]==i+1**çš„æ•°ï¼Œè¿™æ ·å¯ä»¥å¥—ç”¨æˆ‘ä»¬çš„æ¨¡å‹æ¥è§£å†³ã€‚

é¢˜ç›® [2424. æœ€é•¿ä¸Šä¼ å‰ç¼€](https://leetcode.cn/problems/longest-uploaded-prefix/) å°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªæŠ€å·§æ¥å®Œæˆï¼ˆè™½ç„¶ä¸æ˜¯æœ€ä¼˜è§£ï¼‰

å‚è€ƒä»£ç ï¼š

```py
from sortedcontainers import SortedList

class LUPrefix:

    def __init__(self, n: int):
        self.d = SortedList()
        self.n = n

    def upload(self, video: int) -> None:
        self.d.add(video)

    def longest(self) -> int:

        l, r = 0, len(self.d) - 1

        while l <= r:
            mid = (l + r) // 2
            if self.d[mid] == mid+1:
                l = mid + 1
            else:
                r = mid - 1
        return r + 1
```

2. æ±‚è§£æœ€å°‘éœ€è¦å¤šå°‘æ­¥ã€‚

æ¯”å¦‚å‘ç”Ÿç«ç¾äº†ï¼Œç«åŠ¿å¯ä»¥è”“å»¶ï¼Œé—®é¢˜æœ€æ™šåŸåœ°ç­‰å¤šä¹…å¼€å§‹è·‘èƒ½è·‘æ‰ã€‚æˆ‘ä»¬å¯ä»¥å°†é—®é¢˜è½¬åŒ–ä¸ºæ±‚**æœ€å³æ»¡è¶³ xxx**ï¼Œè¿™æ ·å¯ä»¥å¥—ç”¨æˆ‘ä»¬çš„æ¨¡å‹æ¥è§£å†³ã€‚

å†æ¯”å¦‚è¿˜æ˜¯å‘ç”Ÿç«ç¾äº†ï¼Œä½†æ˜¯æ¶ˆé˜²å‘˜å¯ä»¥è”“å»¶åœ°æ‰‘ç«ï¼Œä½ æœ€æ—©å•¥æ—¶å€™å¯ä»¥è·‘æ‰ ã€‚ç±»ä¼¼åœ°ï¼Œæˆ‘ä»¬å¯ä»¥å°†é—®é¢˜è½¬åŒ–ä¸ºæ±‚**æœ€å·¦æ»¡è¶³ xxx**ï¼Œè¿™æ ·å¯ä»¥å¥—ç”¨æˆ‘ä»¬çš„æ¨¡å‹æ¥è§£å†³ã€‚æˆ‘ä»¬ä¸Šé¢è®²è§£çš„ 778. æ°´ä½ä¸Šå‡çš„æ³³æ± ä¸­æ¸¸æ³³ï¼ˆå›°éš¾ï¼‰ å°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ¨¡å‹ã€‚

3. æå¤§åŒ–æå°å€¼æˆ–è€…æå°åŒ–æå¤§å€¼ã€‚

è¿™ç§é¢˜ç›®è€ƒè™‘ä½¿ç”¨åŠ¨æ€è§„åˆ’æˆ–è€…äºŒåˆ†ã€‚ åŠ¨æ€è§„åˆ’å¯ä»¥å‚è€ƒåé¢åŠ¨æ€è§„åˆ’ç« èŠ‚çš„åšå¼ˆ DPã€‚

æœ´ç´ çš„æ€ç»´æ˜¯çº¿æ€§æšä¸¾æœ€å¤§å€¼ï¼Œå¹¶åˆ¤æ–­æœ€å¤§å€¼æ˜¯å¦çœŸçš„å¯ä»¥å–åˆ°ã€‚äºŒåˆ†çš„è¯å°±æ˜¯å¯¹è¿™ä¸€è¿‡ç¨‹çš„æŠ˜åŠä¼˜åŒ–ã€‚

å‚è€ƒé¢˜ç›® [2439. æœ€å°åŒ–æ•°ç»„ä¸­çš„æœ€å¤§å€¼](https://leetcode.cn/problems/minimize-maximum-of-array/)

## æ€»ç»“

äºŒåˆ†æŸ¥æ‰¾æ˜¯ä¸€ç§éå¸¸é‡è¦ä¸”éš¾ä»¥æŒæ¡çš„æ ¸å¿ƒç®—æ³•ï¼Œå¤§å®¶ä¸€å®šè¦å¥½å¥½é¢†ä¼šã€‚æœ‰çš„é¢˜ç›®ç›´æ¥äºŒåˆ†å°±å¯ä»¥äº†ï¼Œæœ‰çš„é¢˜ç›®äºŒåˆ†åªæ˜¯å…¶ä¸­ä¸€ä¸ªç¯èŠ‚ã€‚ä¸ç®¡æ˜¯å“ªç§ï¼Œéƒ½éœ€è¦æˆ‘ä»¬å¯¹äºŒåˆ†çš„æ€æƒ³å’Œä»£ç æ¨¡æ¿éå¸¸ç†Ÿæ‚‰æ‰å¯ä»¥ã€‚

äºŒåˆ†æŸ¥æ‰¾çš„åŸºæœ¬é¢˜å‹æœ‰ï¼š

- æŸ¥æ‰¾æ»¡è¶³æ¡ä»¶çš„å…ƒç´ ï¼Œè¿”å›å¯¹åº”ç´¢å¼•
- å¦‚æœå­˜åœ¨å¤šä¸ªæ»¡è¶³æ¡ä»¶çš„å…ƒç´ ï¼Œè¿”å›æœ€å·¦è¾¹æ»¡è¶³æ¡ä»¶çš„ç´¢å¼•ã€‚
- å¦‚æœå­˜åœ¨å¤šä¸ªæ»¡è¶³æ¡ä»¶çš„å…ƒç´ ï¼Œè¿”å›æœ€å³è¾¹æ»¡è¶³æ¡ä»¶çš„ç´¢å¼•ã€‚
- æ•°ç»„ä¸æ˜¯æ•´ä½“æœ‰åºçš„ã€‚ æ¯”å¦‚å…ˆå‡åºå†é™åºï¼Œæˆ–è€…å…ˆé™åºå†å‡åºã€‚
- å°†ä¸€ç»´æ•°ç»„å˜æˆäºŒç»´æ•°ç»„ã€‚
- å±€éƒ¨æœ‰åºæŸ¥æ‰¾æœ€å¤§ï¼ˆæœ€å°ï¼‰å…ƒç´ 
- ã€‚ã€‚ã€‚

ä¸ç®¡æ˜¯å“ªä¸€ç§ç±»å‹ï¼Œæˆ‘ä»¬çš„æ€ç»´æ¡†æ¶éƒ½æ˜¯ç±»ä¼¼çš„ï¼Œéƒ½æ˜¯ï¼š

- å…ˆå®šä¹‰**æœç´¢åŒºé—´**ï¼ˆéå¸¸é‡è¦ï¼‰
- æ ¹æ®æœç´¢åŒºé—´å®šä¹‰å¾ªç¯ç»“æŸæ¡ä»¶
- å–ä¸­é—´å…ƒç´ å’Œç›®æ ‡å…ƒç´ åšå¯¹æ¯”ï¼ˆç›®æ ‡å…ƒç´ å¯èƒ½æ˜¯éœ€è¦æ‰¾çš„å…ƒç´ æˆ–è€…æ˜¯æ•°ç»„ç¬¬ä¸€ä¸ªï¼Œæœ€åä¸€ä¸ªå…ƒç´ ç­‰ï¼‰ï¼ˆéå¸¸é‡è¦ï¼‰
- æ ¹æ®æ¯”è¾ƒçš„ç»“æœæ”¶ç¼©åŒºé—´ï¼Œèˆå¼ƒéæ³•è§£ï¼ˆä¹Ÿå°±æ˜¯äºŒåˆ†ï¼‰

> å¦‚æœæ˜¯æ•´ä½“æœ‰åºé€šå¸¸åªéœ€è¦ nums[mid] å’Œ target æ¯”è¾ƒå³å¯ã€‚å¦‚æœæ˜¯å±€éƒ¨æœ‰åºï¼Œåˆ™å¯èƒ½éœ€è¦ä¸å…¶å‘¨å›´çš„ç‰¹å®šå…ƒç´ è¿›è¡Œæ¯”è¾ƒã€‚

å¤§å®¶å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ€ç»´æ¡†æ¶å¹¶ç»“åˆæœ¬æ–‡ä»‹ç»çš„å‡ ç§é¢˜å‹è¿›è¡Œç»ƒä¹ ï¼Œå¿…è¦çš„æƒ…å†µå¯ä»¥ä½¿ç”¨æˆ‘æä¾›çš„è§£é¢˜æ¨¡æ¿ï¼Œæä¾›è§£é¢˜é€Ÿåº¦çš„åŒæ—¶ï¼Œæœ‰æ•ˆåœ°é™ä½å‡ºé”™çš„æ¦‚ç‡ã€‚

ç‰¹åˆ«éœ€è¦æ³¨æ„çš„æ˜¯**æœ‰æ— é‡å¤å…ƒç´ å¯¹äºŒåˆ†ç®—æ³•å½±å“å¾ˆå¤§**ï¼Œæˆ‘ä»¬éœ€è¦å°å¿ƒå¯¹å¾…ã€‚

å¦å¤–æœ¬æ–‡ä¸»è¦è®²äº†ä¸¤ç§äºŒåˆ†ç±»å‹ï¼šæœ€å·¦å’Œæœ€å³ï¼Œæ¨¡æ¿å·²ç»ç»™å¤§å®¶äº†ï¼Œå¤§å®¶åªéœ€è¦æ ¹æ®é¢˜ç›®è°ƒæ•´è§£ç©ºé—´å’Œåˆ¤æ–­æ¡ä»¶å³å¯ã€‚å…³äºå››ç§åº”ç”¨æ›´å¤šçš„è¿˜æ˜¯è®©å¤§å®¶ç†è§£äºŒåˆ†çš„æ ¸å¿ƒ**æŠ˜åŠ**ã€‚è¡¨é¢ä¸Šæ¥çœ‹ï¼ŒäºŒåˆ†å°±æ˜¯å¯¹æœ‰åºåºåˆ—çš„æŸ¥æ‰¾ã€‚å…¶å®ä¸ç„¶ï¼Œåªä¸è¿‡æœ‰åºåºåˆ—å¾ˆå®¹æ˜“åšäºŒåˆ†ç½¢äº†ã€‚å› æ­¤æˆ˜æœ¯ä¸Šå¤§å®¶ä¿æŒå¯¹æœ‰åºåºåˆ—çš„æ•æ„Ÿåº¦ï¼Œæˆ˜ç•¥ä¸Šè¦æ˜ç¡®äºŒåˆ†çš„æœ¬è´¨æ˜¯æŠ˜åŠï¼Œæ ¸å¿ƒåœ¨äºä»€ä¹ˆæ—¶å€™å°†å“ªä¸€åŠæŠ˜åŠã€‚

ä¸€ä¸ªé—®é¢˜èƒ½å¦ç”¨äºŒåˆ†è§£å†³çš„å…³é”®åœ¨äºæ£€æµ‹ä¸€ä¸ªå€¼çš„æ—¶å€™æ˜¯å¦å¯ä»¥æ’é™¤è§£ç©ºé—´ä¸­çš„ä¸€åŠå…ƒç´ ã€‚æ¯”å¦‚æˆ‘å‰é¢åå¤æåˆ°çš„**å¦‚æœ x ä¸è¡Œï¼Œé‚£ä¹ˆè§£ç©ºé—´ä¸­æ‰€æœ‰å°äºç­‰äº x çš„å€¼éƒ½ä¸è¡Œ**ã€‚

å¯¹äºç®€å•é¢˜ç›®ï¼Œé€šå¸¸å°±æ˜¯ç»™ä½ ä¸€ä¸ªæœ‰åºåºåˆ—ï¼Œè®©ä½ åœ¨ä¸Šé¢æ‰¾æ»¡è¶³æ¡ä»¶çš„ä½ç½®ã€‚é¡¶å¤šå˜åŒ–ä¸€ç‚¹ï¼Œæ¯”å¦‚æ•°ç»„å±€éƒ¨æœ‰åºï¼Œä¸€ç»´å˜æˆäºŒç»´ç­‰ã€‚å¯¹äºè¿™éƒ¨åˆ†å¯ä»¥çœ‹ä¸‹æˆ‘å†™çš„[91 ç®—æ³• - äºŒåˆ†æŸ¥æ‰¾è®²ä¹‰](https://github.com/azl397985856/leetcode/blob/master/91/binary-search.md "91ç®—æ³• - äºŒåˆ†æŸ¥æ‰¾è®²ä¹‰")

ä¸­ç­‰é¢˜ç›®å¯èƒ½éœ€è¦è®©ä½ è‡ªå·±æ„é€ æœ‰åºåºåˆ—ã€‚å¤§å®¶ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨ç¼–ç¨‹è¯­è¨€è‡ªå¸¦çš„æ•°æ®ç»“æ„ï¼Œæ¯”å¦‚ Java çš„ TreeSetï¼ŒCPP çš„ multisetï¼ŒPython sortedcontainers ç­‰ç­‰ã€‚

å›°éš¾é¢˜åˆ™å¯èƒ½æ˜¯äºŒåˆ†å’Œå…¶ä»–ä¸“é¢˜çš„ç»“åˆï¼Œæ¯”å¦‚ä¸Šé¢çš„ 778. æ°´ä½ä¸Šå‡çš„æ³³æ± ä¸­æ¸¸æ³³ï¼ˆå›°éš¾ï¼‰ï¼Œå°±æ˜¯äºŒåˆ†å’Œæœç´¢çš„ç»“åˆã€‚æˆ‘ä»¬ç»™çš„ä¾‹å­æ˜¯å’Œ DFS è¿›è¡Œç»“åˆï¼Œè€Œä¹Ÿæœ‰çš„é¢˜ç›®éœ€è¦ç»“åˆä½¿ç”¨ BFSï¼Œæ¯”å¦‚ [2258. é€ƒç¦»ç«ç¾](https://leetcode-cn.com/problems/escape-the-spreading-fire/) è¿™ä¸ªç•™ç»™å¤§å®¶å½“ä½œä¸šã€‚

ä»¥ä¸Šå°±æ˜¯æœ¬æ–‡çš„å…¨éƒ¨å†…å®¹äº†ï¼Œ å¤§å®¶å¯¹æ­¤æœ‰ä½•çœ‹æ³•ï¼Œæ¬¢è¿ç»™æˆ‘ç•™è¨€ï¼Œæˆ‘æœ‰æ—¶é—´éƒ½ä¼šä¸€ä¸€æŸ¥çœ‹å›ç­”ã€‚æˆ‘æ˜¯ luciferï¼Œç»´æŠ¤è¥¿æ¹–åŒºæœ€å¥½çš„ç®—æ³•é¢˜è§£ï¼ŒGithub è¶… 40K star ã€‚å¤§å®¶ä¹Ÿå¯ä»¥å…³æ³¨æˆ‘çš„å…¬ä¼—å·ã€ŠåŠ›æ‰£åŠ åŠ ã€‹å¸¦ä½ å•ƒä¸‹ç®—æ³•è¿™å—ç¡¬éª¨å¤´ã€‚

å¦å¤–æˆ‘æ•´ç†çš„ 1000 å¤šé¡µçš„ç”µå­ä¹¦å·²é™æ—¶å…è´¹ä¸‹è½½ï¼Œå¤§å®¶å¯ä»¥å»æˆ‘çš„å…¬ä¼—å·ã€ŠåŠ›æ‰£åŠ åŠ ã€‹åå°å›å¤ç”µå­ä¹¦è·å–ã€‚
